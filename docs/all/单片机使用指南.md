<TOC />
# 单片机使用指南

## 软件说明：
1. USB下载口驱动程序CH340 →开发板USB下载口驱动程序，首次通过USB下载程序之前，需要在电脑上预安装驱动。
2. STC-ISP下载烧写软件 →用来将keil编译好的程序代码下载到51单片机中。
3. Keil集成开发工具 →编程开发软件，用于编写51单片机的程序。
4. SecureCRT →类似xp系统下的超级终端，通过它与单片机进行通信，打印信息，给开发板进行整板测试。
5. 其它常用工具软件 →一些常用的工具软件。
6. PDF阅读器 →用于阅读pdf文件。开发板的用户手册、原理图等都用它查看。

## USB下载口驱动程序CH340
> 开发板USB下载口驱动程序，首次通过USB下载程序之前，需要在电脑上预安装驱动。

安装后开发板和电脑才能正常通过数据线连接

## Keil集成开发工具
> 编程开发软件，用于编写51单片机的程序。

新增项目：
Project——New Project——填写文件名如test1_1——点击保存——在弹框中选择对应的单片机型号（AT89C52）——点击确定

新建文件与项目绑定：
File——New——Ctrl+s保存——输入文件名test1_1.c——点击保存——选择目录下的Target1下的Source Group1右击选择Add File To Group 'Source Group1'——选择test1_1.c——Add——确定即可添加成功

设置Hz
Options for Target——选择Target标签——设置Xtal(MHz)11.0592

设置生成十六进制可执行文件
Options for Target——选择Output标签——勾选Create HEX File

运行代码
Build target

调试代码
Build target——Start/Stop Debug Session——可选择View——Watch&Call Stack Windows打开监控窗口——Peripherals——I/O-Ports——Port1开启模拟测试

## STC-ISP下载烧写软件
> 用来将keil编译好的程序代码下载到51单片机中。

设置下载参数:
设置单片机型号为STC89C52;
设置串口号为COM3（依据自己电脑）;
最低波特比为2400;
最高波特比为115200;

下载文件到单片机:
打开程序文件——选择test1_1.hex——点击确定;
点击下载/编程——再单片机板子上按下重启按钮开始下载程序

## SecureCRT 连接工具
> 通过它与单片机进行通信，打印信息，给开发板进行整板测试。

## 学单片机需要什么基础？
1. 与以前所学的只是关联很少;
2. 只需要掌握很基本的数电模电知识，如：二进制、十进制、十六进制之间的转换，与、或、非逻辑关系等;
3. 对各种器件的概念基本上是从0开始;
4. 如果要用C语言编程，需具备简单的C语言基础;
5. 所有人都站在同一起跑线上;

## 什么是单片机？
单板机
> 将CPU芯片、寄存器芯片、I/O接口芯片和简单的I/O设备（小键盘、LED显示器）等装配在一块印刷电路板上，再配上监控程序（固化在ROM中），就构成了一台单板微型计算机（简称单片机）。

单片机
> 在一片集成电路芯片上集成微处理器、存储器、I/O接口电路，从而构成了单芯片微型计算机，即单片机。Intel公司推出了MCS-51系列单片机：集成8位CPU、4K字节ROM、128字节RAM、4个8位并口、1个全双工串行口、2个16位定时/计数器。寻址范围64k，并有控制功能较强的布尔处理器。

## 单片机能做什么？
1. 手持粮库温度巡检设备
2. 毕设答辩打分器
3. 电话台灯
4. 自动感应水龙头
5. 凡是与控制或简单计算有关的电子设备都可以用单片机来实现。再根据实际情况选择不同性能的单片机，如：atmel,stc,pic,avr,凌阳,80C51,arm等。
6. 工业自动化：数据采集、测控计数。
7. 智能仪器仪表：数字示波器、数字信号源。
8. 消费类电子产品：洗衣机、电冰箱、空调、电视、微波炉、手机、IC卡、汽车电子设备等。
9. 通讯方面：调制解调器、程控交换技术、手机、小灵通等。
10. 武器装备：飞机、军舰、坦克、导弹、航天飞机、鱼雷制导、智能武器等。

## 怎么开始学习？
1. 实践第一。
2. 补充必要的理论知识，缺什么补什么。
3. 做工程项目积累经验。（可在网上搜集题目，也可以自己有什么想法大胆去实验）

## 电平特性
1. 数字电路中只有两种电平：高和低
2. 定时单片机为TTL电平：高+5V  低0V
3. RS232电平：计算机的串口：高-12V  低+12V。所以计算机与单片机之间通讯时需要加电平转换芯片max232。（实验板左下角）

## 2进制与16进制的表示及转换
数字电路中两种电平特性决定了它
```
2进制   10进制   16进制
0       6        110
1       7        111
10      8        1000
11      9        1001
100     10       1010
101     11       1011
```
十六进制
1. 是二进制的简短表示形式。
2. 十进制中的0-15分别表示为十六进制的0-9-A-H
3. 熟练掌握二进制与十进制之间的转换。规律：一般四个二进制数放在一起转换成一个十六进制数，转换时先把二进制数转换为十进制数，再把十进制数转换为十六进制数。
B表示为二进制，H为十六进制。
如：0001B->1->1H
    1001B->9->9H
    1010B->10->AH
    00101100->44->2CH

## 二进制数的逻辑运算
1. 与运算
与运算是实现，必须都有，否则就没有。这种逻辑关系的一种运算。运算符为“.”。

2. 或运算
或运算是实现，只要其中之一有，就有。这种逻辑关系的一种运算。运算符为”+“

3. 非运算
非运算是实现，求反。这种逻辑的一种运算。运算符为”-“

4. 异或运算
异或运算是实现，必须不同，否则就没有。这种逻辑的一种运算。运算符为”+“ 

## 8051单片机介绍
80C51是MCS-51系类中的一个典型品种;其他厂商以8051为基核开发出的CMOS工艺单片机产品统称为80C51系列。当前常用的80C51系列单片机主要产品有：
Intel的：80C31、80C51、87C51、80C32、80C52、87C52等;
ATMEL的：89C51、89C52、89C2051等;
Philips、华邦、Dallas、STC Siemens(Infineon)等公司的许多产品。

## 单片机上STC 89C52RC 40C-PDIP 0721CV4336 的标号含义
STC STC公司生成
89  89系类
C   cmos  
52  内部存储空间 2 2*4=8k
40  晶振最高频率40MHZ
C   商业级别(0度-85度) I 工业级(-40度-125度)
PDIP    封装格式双列直插式
0721C   07年第21周产
CV4336  该批次产品型号

## 80C51的引脚封装
总线型      非总线型
80C51/89C51 89C2051

P3第二功能各引脚功能定义：
P3.0:RXD串行口输入
P3.1:TXD串行口输出
P3.2:INTO外部中断0输入
P3.3:INT1外部中断1输入
P3.4:T0定时器0外部输入
P3.5:T1定时器1外部输入
P3.6:WR外部写控制
P3.7:RD外部读控制

## 总线（BUS）
总线（BUS）是计算机各部件之间传递信息的公共通道。微机中有内部总线和外部总线两类。内部总线是CPU内部之间的连线。外部总线是指CPU与其它部件之间的连线。外部总线有三种：数据总线DB（Data Bus），地址总线AB（Address Bus）和控制总线CB（Control Bus）

CPU: 由运算和控制逻辑组成，同时还包括中断系统和部分外部特殊功能寄存器。

RAM: 用于存放可以读写的数据，如运算的中间结果、最终结果以及欲显示的数据。

ROM: 用于存放程序、一些原始数据和表格。

I/O口: 四个8位并行I/O口，既可用作输入，又可用作输出。

T/C: 两个定时/计数器，即可以工作在定时模式，也可以工作在计数模式。

五个中断源的中断控制系统

一个全双工UART(通用异步接口发送器)的串行I/O口，用于实现单片机之间或单片机与微机之间的串行通信。

片内振荡器和时钟产生电路，石英晶体和微调电容需要外接。最高振荡频率取决于单片机型号及性能

## C51知识
1. C语言是一种编译型程序设计语言，它兼顾了多种高级语言的特点，并具备汇编语言的功能。目前，使用C语言进行程序设计已经成为软件开发的一个主流。用C语言开发系统可以大大缩短开发周期，明显增强程序的可读性，便于改进、扩充和移植。而针对8051的C语言日趋成熟，成为专业化的实用高级语言。
2. C语言作为一种非常方便的语言而得到广泛的支持，很多硬件开发都用C语言编程，如：各种单片机、DSP、ARM等。
3. C语言程序本身不依赖于机器硬件系统，基本上不作修改就可将程序从不同的单片机中移植过来。
4. C提供了很多数学函数并支持浮点运算，开发效率高，故可缩短开发时间，增加程序可读性和可维护性。

## C-51与ASM-51相比，有如下优点：
1. 对单片机的指令系统不要求了解，仅要求对8051的存储器结构有初步了解;
2. 寄存器分配、不同存储器的寻址及数据类型等细节可由编译器管理。
3. 程序有规范的结构，可分成不同的函数，这种方式可使程序结构化;
4. 提供的库包含很多标准子程序，具有较强的数据处理能力;
5. 由于具有方便的模块化编程技术，使已编好的程序可以容易的移植;

## C-51的数据类型
基本数据类型
```
类型    符号    关键字              所占位数    数的表示范围
整型    有      (signed)int         16         -32768~32767
整型    有      (signed)short       16         -32768~32767
整型    有      (signed)long        32         -2147483648~2147483647
整型    无      (unsigned)int       16         0~65535
整型    无      (unsigned)short int 16         0~65535
整型    无      (unsigned)long int  32         0~4294967295
实型    有      float               32         3.4e-38~3.4e308
实型    有      double              64         1.7e-308~1.7e308
实型    有      char                8          -128~127
实型    无      unsigned char       8          0~255
```

## C-51的数据类型扩充定时
sfr:特殊功能寄存器声明
sfr16:sfr的16位数据声明
sbit:特殊功能位声明
bit:位变量声明
例子：sfr SCON = 0x98;
      sfr16 T2 = 0xCC;
      sbit 0V = PSW^2;

## C-51数据的存储类型
```
数据类型        变量名
char           var1;
bit            flags;
unsigned char  vextor[10];
int            wwww;

注意：变量名不能用C语言中的关键字表示。
```

## C-51的包含的头文件
通常有：reg
