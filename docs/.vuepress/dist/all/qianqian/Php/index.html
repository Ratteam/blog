<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP | ratfrog的博客</title>
    <meta name="description" content="Just playing around">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/icon.png">
  <script>var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?46eb6dbf0c639c7f8f8b9bc2e1b8e9ad";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();</script>
    
    <link rel="preload" href="/assets/css/0.styles.0cf81d82.css" as="style"><link rel="preload" href="/assets/js/app.f33c03af.js" as="script"><link rel="preload" href="/assets/js/2.8a1ae630.js" as="script"><link rel="preload" href="/assets/js/37.3ef6ca82.js" as="script"><link rel="prefetch" href="/assets/js/10.a06011e4.js"><link rel="prefetch" href="/assets/js/11.e1114912.js"><link rel="prefetch" href="/assets/js/12.edc64439.js"><link rel="prefetch" href="/assets/js/13.a3173774.js"><link rel="prefetch" href="/assets/js/14.4bed2e41.js"><link rel="prefetch" href="/assets/js/15.1699dde0.js"><link rel="prefetch" href="/assets/js/16.bad8e339.js"><link rel="prefetch" href="/assets/js/17.a90a954f.js"><link rel="prefetch" href="/assets/js/18.eada6ffb.js"><link rel="prefetch" href="/assets/js/19.91c13f14.js"><link rel="prefetch" href="/assets/js/20.56a81c75.js"><link rel="prefetch" href="/assets/js/21.41c09a46.js"><link rel="prefetch" href="/assets/js/22.cfc872f3.js"><link rel="prefetch" href="/assets/js/23.a2e057c4.js"><link rel="prefetch" href="/assets/js/24.7249cf00.js"><link rel="prefetch" href="/assets/js/25.1e415478.js"><link rel="prefetch" href="/assets/js/26.c0bb86a7.js"><link rel="prefetch" href="/assets/js/27.f219c934.js"><link rel="prefetch" href="/assets/js/28.c5d553d6.js"><link rel="prefetch" href="/assets/js/29.ed288419.js"><link rel="prefetch" href="/assets/js/3.edeb5efd.js"><link rel="prefetch" href="/assets/js/30.a18f130f.js"><link rel="prefetch" href="/assets/js/31.b2cb940b.js"><link rel="prefetch" href="/assets/js/32.805baf01.js"><link rel="prefetch" href="/assets/js/33.306f9fe8.js"><link rel="prefetch" href="/assets/js/34.04f2de4f.js"><link rel="prefetch" href="/assets/js/35.43117b54.js"><link rel="prefetch" href="/assets/js/36.cbcad82d.js"><link rel="prefetch" href="/assets/js/38.b96ccc3c.js"><link rel="prefetch" href="/assets/js/39.a703af32.js"><link rel="prefetch" href="/assets/js/4.983ed5d5.js"><link rel="prefetch" href="/assets/js/40.4cf0ab32.js"><link rel="prefetch" href="/assets/js/41.c53bad33.js"><link rel="prefetch" href="/assets/js/42.79a3b3ee.js"><link rel="prefetch" href="/assets/js/43.1b497787.js"><link rel="prefetch" href="/assets/js/44.45420b05.js"><link rel="prefetch" href="/assets/js/45.5cdb95ea.js"><link rel="prefetch" href="/assets/js/46.3458eeea.js"><link rel="prefetch" href="/assets/js/47.2bd0a24c.js"><link rel="prefetch" href="/assets/js/48.a9880aaf.js"><link rel="prefetch" href="/assets/js/49.4415a9a4.js"><link rel="prefetch" href="/assets/js/5.14a93412.js"><link rel="prefetch" href="/assets/js/50.d5af4139.js"><link rel="prefetch" href="/assets/js/51.99f0485b.js"><link rel="prefetch" href="/assets/js/52.9c6543e0.js"><link rel="prefetch" href="/assets/js/53.d8f935c7.js"><link rel="prefetch" href="/assets/js/54.389f76b6.js"><link rel="prefetch" href="/assets/js/55.52c85add.js"><link rel="prefetch" href="/assets/js/56.d1ed2a00.js"><link rel="prefetch" href="/assets/js/57.b907a098.js"><link rel="prefetch" href="/assets/js/58.a46232ef.js"><link rel="prefetch" href="/assets/js/59.9bc3c7c3.js"><link rel="prefetch" href="/assets/js/6.d7af4825.js"><link rel="prefetch" href="/assets/js/60.d923f5d7.js"><link rel="prefetch" href="/assets/js/61.f3bb3210.js"><link rel="prefetch" href="/assets/js/62.7a5b52ff.js"><link rel="prefetch" href="/assets/js/63.4c2b44e4.js"><link rel="prefetch" href="/assets/js/64.9ec9de3e.js"><link rel="prefetch" href="/assets/js/65.411c26a0.js"><link rel="prefetch" href="/assets/js/66.242077af.js"><link rel="prefetch" href="/assets/js/7.bf14451a.js"><link rel="prefetch" href="/assets/js/8.7342b8d4.js"><link rel="prefetch" href="/assets/js/9.e7e3dd5a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cf81d82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ratfrog的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/all/qianqian/" class="nav-link router-link-active">
  钱钱
</a></li><li class="dropdown-item"><!----> <a href="/all/xiexie/" class="nav-link">
  写写
</a></li><li class="dropdown-item"><!----> <a href="/all/xingxing/" class="nav-link">
  星星
</a></li><li class="dropdown-item"><!----> <a href="/all/paipai/" class="nav-link">
  拍拍
</a></li><li class="dropdown-item"><!----> <a href="/all/fanfan/" class="nav-link">
  翻翻
</a></li><li class="dropdown-item"><!----> <a href="/all/huahua/" class="nav-link">
  画画
</a></li><li class="dropdown-item"><!----> <a href="/all/qiqi/" class="nav-link">
  其其
</a></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/radio/" class="nav-link">
  电台
</a></div><div class="nav-item"><a href="/video/" class="nav-link">
  视频
</a></div><div class="nav-item"><a href="/all/" class="nav-link router-link-active">
  最新文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  支持打赏
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/photowall/" class="nav-link">
  照片墙
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link">
  时间轴
</a></div><div class="nav-item"><a href="/bbs/" class="nav-link">
  公告板
</a></div><div class="nav-item"><a href="/message/" class="nav-link">
  留言板
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/all/qianqian/" class="nav-link router-link-active">
  钱钱
</a></li><li class="dropdown-item"><!----> <a href="/all/xiexie/" class="nav-link">
  写写
</a></li><li class="dropdown-item"><!----> <a href="/all/xingxing/" class="nav-link">
  星星
</a></li><li class="dropdown-item"><!----> <a href="/all/paipai/" class="nav-link">
  拍拍
</a></li><li class="dropdown-item"><!----> <a href="/all/fanfan/" class="nav-link">
  翻翻
</a></li><li class="dropdown-item"><!----> <a href="/all/huahua/" class="nav-link">
  画画
</a></li><li class="dropdown-item"><!----> <a href="/all/qiqi/" class="nav-link">
  其其
</a></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/app/" class="nav-link">
  应用
</a></div><div class="nav-item"><a href="/radio/" class="nav-link">
  电台
</a></div><div class="nav-item"><a href="/video/" class="nav-link">
  视频
</a></div><div class="nav-item"><a href="/all/" class="nav-link router-link-active">
  最新文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  支持打赏
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="/photowall/" class="nav-link">
  照片墙
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link">
  时间轴
</a></div><div class="nav-item"><a href="/bbs/" class="nav-link">
  公告板
</a></div><div class="nav-item"><a href="/message/" class="nav-link">
  留言板
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php"><a href="#php" class="header-anchor">#</a> PHP</h1> <h2 id="yii2中的依赖注入"><a href="#yii2中的依赖注入" class="header-anchor">#</a> Yii2中的依赖注入</h2> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <p>1.依赖倒置（反转）原则（DIP）：一种软件架构设计的原则（抽象概念，是一种思想）
在面向对象编程领域中，依赖反转原则（Dependency inversion principle，DIP）是指一种特定的解耦（传统的依赖关系创建在高层次上，而具体的策略设置则应用在低层次的模块上）形式，使得高层次的模块不依赖于低层次的模块的实现细节，依赖关系被颠倒（反转），从而使得低层次模块依赖于高层次模块的需求抽象。</p> <p>该原则规定：</p> <div class="language- extra-class"><pre><code>1.高层次的模块不应该依赖于低层次的模块，两者都应该依赖于抽象接口。
2.抽象接口不应该依赖于具体实现。而具体实现则应该依赖于抽象接口。
</code></pre></div><p>图片描述</p> <p>在上图中，高层对象A依赖于底层对象B的实现；图2中，把高层对象A对底层对象的需求抽象为一个接口A，底层对象B实现了接口A，这就是依赖反转。</p> <p>该原则颠倒了一部分人对于面向对象设计的认识方式。如高层次和低层次对象都应该依赖于相同的抽象接口。它转换了依赖，高层模块不依赖于低层模块的实现，而低层模块依赖于高层模块定义的接口。通俗的讲，就是高层模块定义接口，低层模块负责实现。</p> <p>2.控制反转（IoC）：一种反转流、依赖和接口的方式（DIP的具体实现方式，一种设计原则）
控制反转（Inversion of Control，缩写为IoC），是面向对象编程中的一种设计原则，可以用来减低计算机代码之间的耦合度。其中最常见的方式叫做依赖注入（Dependency Injection，简称DI），还有一种方式叫“依赖查找”（Dependency Lookup）。通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的外界实体，将其所依赖的对象的引用传递给它。也可以说，依赖被注入到对象中。</p> <p>参考：https://segmentfault.com/a/1190000010788354</p> <h3 id="入口文件"><a href="#入口文件" class="header-anchor">#</a> 入口文件</h3> <blockquote><p>文件位置：web\index.php</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>//定义全局变量
defined('YII_DEBUG') or define('YII_DEBUG', true);
defined('YII_ENV') or define('YII_ENV', 'dev');

//composer自动加载代码机制，可参考 https://segmentfault.com/a/1190000010788354
require(__DIR__ . '/../vendor/autoload.php');

//1.引入工具类Yii
//2.注册自动加载函数
//3.生成依赖注入中使用到的容器
require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php');

//加载应用配置
$config = require(__DIR__ . '/../config/web.php');

//生成应用并运行
(new yii\web\Application($config))-&gt;run();
</code></pre></div><p>参考：https://segmentfault.com/a/1190000011823699</p> <h2 id="sql注入获取后台管理员账号密码"><a href="#sql注入获取后台管理员账号密码" class="header-anchor">#</a> sql注入获取后台管理员账号密码</h2> <p>在完全拿下服务器主机之前，存在sql注入漏洞的网站，可能会因此提供给黑客后台管理员的账号密码，黑客登录后台后，上传木马，拿下整个主机。这是sql注入的一种应用场景。</p> <p>以下讲解sql注入获取后台管理员账号密码的过程，本文以尽力对新手友好的展现过程来讲解基本原理，高手与百事通请避免观看，以免徒耗时间。</p> <p>为避免读者惹上麻烦，已对原本目标网站信息进行涂抹，并提供笔者自己搭建的测试网站供有兴趣的朋友操作，换句话说，黑我的网站是合法的。</p> <p>正式开始，在网站中，点击人才招聘，跳转到如下页面，同时地址栏url变为图中所示。</p> <p>可以看到链接中传给服务器参数，id=2，此处逻辑一般为：服务器获取到id值为2，再通过id值返回给浏览器对应页面或内容，这个过程有可能会经过数据库。</p> <p>首先惯常试试是否存在sql注入漏洞，将地址栏中的id=2更改为id=2'，即在值2后面添加单引号，回车看结果。</p> <p>sweet，塔斯丁狗，服务器返回了数据库错误，并详细的打印了错误信息。由错误信息可以得知，网站使用了mysql数据库，并展示了具体的sql语句：</p> <p>select * from sy_page where 1 and id=2
这条语句表示：查询sy_page表里id为2的全部数据，而发生错误的原因则是因为多出的单引号使sql语句语法发生错误。</p> <p>同时可以看出，我们只加过一个单引号'，上图错误信息却显示，实际sql语句中变为了'反斜杠加单引号，这说明，服务器是做了特殊符号过滤的，以此来防sql注入，这确实起作用，我们便无法注入带有单引号双引号等特殊符号的语句，但其他的注入却是没问题的。</p> <p>在确定存在sql注入漏洞后，对于查询语句，可以先确定查询的数据有多少列，通过如下图链接所示增加排序条件order by来探测，将地址栏中id=2改为id=2 order by 15，这将使原本的查询语句变成</p> <p>select * from sy_page where 1 and id=2 order by 15
这表示，在原来查询结果的基础上进行排序，排序的依据是第15列数据的值。</p> <p>但实际结果却报错，显示不存在第15列，这正是我们追求的结果，说明查询的出数据不超过15列。</p> <p>递减列数尝试，直到列数降为10時，才不再报错，如下图所示，说明数据有10列。</p> <p>在得知列数后，便可以开启真正的掠夺了。那就是在原本的查询结果中加入自己的查询数据。如下图所示，将地址栏中</p> <p>id=2
改为</p> <p>id=2 union select 1,2,3,4,5,6,7,8,9,10</p> <p>这样变化的意图是什么？举个例子，假如下图所示查询数据为网站本来正常的查询结果，id=852，从左至右刚好10列数据。</p> <p>而加入union select 1,2,3,4,5,6,7,8,9,10后，查询结果便如下图所示。多出了一行结果为1 2 3 4 5 6 7 8 9 10的数据。</p> <p>而网站中这行多出来的数据没有显示在页面上的原因是什么？可以想像，网站在获取到两行数据后只取了第一行的数据，因为网站根本没预料到会有两行以上的数据。那么我们只需要将自己的数据排到第一行，就可以替代网站本身的数据了。于是再做一次排序，继续追加一句order by 1，根据第一列的值进行排序，便产生如下结果</p> <p>可以看到，我们自己的数据排到了最前面，这是因为我们自己构建的数据中，第一列的值为1，小于上图示例数据852，于是排到了前面。</p> <p>随后拿到网站中测试，将</p> <p>id=2
改为</p> <p>id=2 union select 1,2,3,4,5,6,7,8,9,10 order by 1
可以看到，我们的内容替换掉了网站内容，第二列数据值2与第6列数据值6显示在了网站页面。</p> <p>这两列显示数据便成了数据输出窗口。换言之，只需要将2和6的值替换为数据库实际内容，就可以输出到页面显示，被我们看见。</p> <p>得知第2列和第6列会显示后，便可以开始尝试将2和6替换为系统表数据，将前面的</p> <p>id=2 union select 1,2,3,4,5,6,7,8,9,10 order by 1
更改为</p> <p>id=2 union select 1,table_schema,3,4,5,table_name,7,8,9,10 from information_schema.columns order by 1</p> <p>这句表示，我们自己追加的数据不再是单纯的10个数字，而是从mysql的系统表columns中查询的数据，第二列与第六列分别显示columns表中的table_schema列与table_name列数据。table_schema列存储的是数据库名字信息，table_name列存储着表名信息。下图查询到的数据库名为information_schema，表名为character_sets</p> <p>上面查询的columns表是mysql的系统表，里面存储着mysql中所有的表名及列信息，如下图的本机展示可以看到所有的表名，列名，列的数据类型，通过这个表，可以爆出所有的表名，列名，及所在数据库，是获取数据的突破口。</p> <p>下图是一个本机测试，用的是前面爆网站表名的语句：</p> <p>select * from table1 where id=852 union select 1,table_schema,3,4,5,table_name,7,8,9,10 from information_schema.columns order by 1
可以看到，所有的表列数据被追加到我们自己的数据里，做个对比的话，下图最后一列数据就像网站正常显示的数据，其他的则是我们注入的数据。</p> <p>那么如何把这么多行数据逐个爆出来呢？很明显依靠排序是不足以实现的，这时可以再在之前的查询语句后追加一个limit条件，如下图所示</p> <p>limit m,n
表示筛选出从第m+1行开始的n行数据</p> <p>limit 0,1
便表示筛选出第一行开始的一行数据，这样如下图就得到了第一行数据，换成limit 1,1则是筛选出第二行数据，以此类推，可以分别得出每一行的数据。</p> <p>应用到网站中，发现从第41行开始不再是系统表，如下图所示，第41行爆出了数据库名sq_sydata，表名sy_admin</p> <p>一行一行爆，如图展示，更改limit限定值会爆出其他的表名。</p> <p>最后爆出了所有的表，如下图所示。</p> <p>按照命名推断，sy_admin表必定是后台管理员账号表，既然columns系统表中存放着所有列信息，自然也可以用来将sy_admin表的列名爆出来，将</p> <p>id=2 union select 1,table_schema,3,4,5,table_name,7,8,9,10 from information_schema.columns order by 1
中的table_schema（数据库名）替换为table_name（表名），table_name（表名）替换为column_name（列名），再尝试更改limit的限定值，直到更改为480時开始出现sy_admin表的内容，下图可以看到第481列（limit 480,1）爆出了sy_admin表的一个列名为id。</p> <p>继续递增列爆481，得到列名loginname。</p> <p>继续递增，最终爆出sy_admin表的所有列名，如下图所示。</p> <p>可以推断，上图中的lpginname列应该是用户名，password则是登录密码。</p> <p>ok，已经得到了sy_admin表的所有列名，接下来就可以开始获取sy_admin表中的实际数据了。</p> <p>然后我们不再查询系统表，转向sy_admin表，如下图所示，将第二列替换为loginname，第六列替换为password，表名从系统表information_schema.columns（information_schema数据库中的columns表）更换为sq_sydata.sy_admin（sq_sydata数据库中的sy_admin表），再稍微更换limit限定条件，最终得到了后台管理员admin的密码，如下图所示</p> <p>目标达成。</p> <p>上图中加密后的密码可以通过工具或百度在线md5解密工具解密，不作赘述。</p> <p>同样也可以更换列名查出其他的信息，比如下图所示登录次数27次，上次登录于2月1号。以及其他的东西，你懂的。</p> <h1 id="php性能优化"><a href="#php性能优化" class="header-anchor">#</a> php性能优化</h1> <h2 id="php语言级的性能优化"><a href="#php语言级的性能优化" class="header-anchor">#</a> php语言级的性能优化</h2> <p>优化点：少写代码，多用php自身能力</p> <ul><li>性能问题：自身代码冗余较多，可读性不佳，并且性能低。</li> <li>为什么性能低：php代码需要编译解析为底层语言，这一过程每次请求都会处理一遍，开销大。</li> <li>解决方案：多用php内置变量、常量、函数</li> <li>测试方法：直接使用ab对比</li></ul> <p>优化点：php内置函数的性能优劣</p> <ul><li>性能问题：php内置函数，之间依然存在快慢差异</li> <li>解决方案：多去了解php内置函数的时间复杂度</li> <li>测试方法：对比isset()和array_key_exists()的性能差异</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token variable">$start</span> <span class="token operator">=</span> <span class="token function">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">200000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token number">200000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">++</span><span class="token variable">$i</span><span class="token punctuation">;</span>
        <span class="token comment">//isset($arr[$i]);</span>
        <span class="token function">array_key_exists</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">,</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$end</span> <span class="token operator">=</span> <span class="token function">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;Lost Time:&quot;</span><span class="token punctuation">.</span> <span class="token function">number_format</span><span class="token punctuation">(</span><span class="token variable">$end</span><span class="token operator">-</span><span class="token variable">$start</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;\n&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">list</span><span class="token punctuation">(</span><span class="token variable">$usec</span><span class="token punctuation">,</span> <span class="token variable">$sec</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot; &quot;</span><span class="token punctuation">.</span><span class="token function">microtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>float<span class="token punctuation">)</span><span class="token variable">$usec</span> <span class="token operator">+</span> <span class="token punctuation">(</span>float<span class="token punctuation">)</span><span class="token variable">$sec</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p>优化点：尽可能少用魔法函数</p> <ul><li>情况描述：php提供的魔法函数，性能不佳</li> <li>为什么性能低：为了给php程序员省事，php语言为你做了很多</li> <li>解决方案：尽可能规避使用魔法函数</li> <li>测试方法：time php test.php
<ul><li>time  liunx命令</li> <li>php 指定程序</li> <li>test.php 指定文件</li></ul> <blockquote><p>注意：php主要在返回值中看user耗时</p></blockquote></li></ul> <p>优化点：产生额外开销在错误抑制符</p> <ul><li><p>情况描述：php提供的错误抑制符只是为了方便懒人</p></li> <li><p>@的实际逻辑：在代码开始前，结束后，增加Opcode,忽略报错
vld php Opcode查看扩展:用于将Opcode显示出来</p></li> <li><p>解决方案：尽量不要使用@错误抑制符</p></li> <li><p>测试方法：php -dvld.active=1 -dvld.execute=0 at.php</p></li> <li><p>php 执行php的vld显示Opcode</p></li></ul> <p>优化点：避免在循环内做运算</p> <ul><li>情况描述：循环内在函数或运算会被重复执行</li> <li>解决方案：在循环外获取需要在值，再给循环操作</li></ul> <p>优化点：减少计算密集型业务</p> <ul><li>情况描述：php不适合密集型的场景</li> <li>为什么：php语言特性决定php不适合做大数据业务</li> <li>php适合场景：适合衔接webserver与sql</li></ul> <p>优化点：务必使用带引号字符串做键值</p> <ul><li>情况描述：php会将没有引号的键值当作常量，产生查找常量在开销。</li> <li>解决方案：严格使用带引号作为键值</li></ul> <h2 id="php周边问题的性能优化"><a href="#php周边问题的性能优化" class="header-anchor">#</a> php周边问题的性能优化</h2> <ul><li>php周边有什么:
<ul><li>linux运行环境</li> <li>文件存储  硬盘</li> <li>数据库    mysql</li> <li>缓存      redis</li> <li>网络</li></ul></li></ul> <p>优化点：减少文件类操作</p> <ul><li>常见php场景在开销次序
读写内存 &lt;&lt; 读写数据库 &lt;&lt; 读写磁盘 &lt;&lt; 读写网络数据</li></ul> <p>优化点：优化网络请求</p> <ul><li>网络请求的坑：
<ol><li>对方接口的不确定因素</li> <li>网络稳定性</li></ol></li> <li>如何优化网络请求：
<ul><li>设置超时时间</li></ul> <ol><li>连接超时 &lt;200ms</li> <li>读超时   &lt;800ms</li> <li>写超时   &lt;500ms</li></ol> <ul><li>将串行请求并行化</li></ul> <ol><li>使用curl_multi_*()</li> <li>使用swoole扩展</li></ol></li></ul> <p>优化点：压缩php接口输出</p> <ul><li>如何压缩：使用Gzip即可</li> <li>压缩的利于弊：利于我们的数据输出，Client段能更快获取数据;弊端为会有额外的CPU开销</li></ul> <p>优化点：缓存重复计算内容</p> <ul><li>什么情况下坐输出内容缓存：多次请求，内容不变情况</li></ul> <p>重叠时间窗口思想===并行
旁路方案===并行</p> <h2 id="php语言自身分析、优化"><a href="#php语言自身分析、优化" class="header-anchor">#</a> php语言自身分析、优化</h2> <h3 id="php性能分析"><a href="#php性能分析" class="header-anchor">#</a> php性能分析</h3> <p>工具:XHPorf（源自FackBook的php性能分析工具）
实践：通过分析Wordpress程序，做优化。
使用: php --ri xhprof   查看版本
在入口文件index.php添加</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">xhprof_enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">xhporf_disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">include_once</span> <span class="token double-quoted-string string">&quot;/var/www/html/xhprof_lib/utils/xhprof_lib.php&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">include_once</span> <span class="token double-quoted-string string">&quot;/var/www/html/xhprof_lib/utils/xhprof_runs.php&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$objXhprofRun</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XHProfRuns_Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$run_id</span> <span class="token operator">=</span> <span class="token variable">$objXhprofRun</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save_run</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$run_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查看xhp目录查看相关信息
参数：
runction_name   函数名
calls   被调用在次数
InclWallTime    当流程走到该函数，之前和现在这个函数处理在总耗时
ExclWallTime    这个函数执行了多少微秒</p> <p>其他工具推荐：
ab  压力测试
vld opcode代码分析</p> <p>php性能瓶颈解决方案：
Opcode Cache:php扩展APC等
peci.php.net    php扩展网站
使用php扩展解决复杂的业务
Runtime优化:HHVM</p> <h3 id="apache-benchmark-ab"><a href="#apache-benchmark-ab" class="header-anchor">#</a> Apache Benchmark(ab)</h3> <blockquote><p>ab是由Apache提供的压力测试软件。安装apache服务器时会自带该压测软件</p></blockquote> <ul><li>使用方法: ./ab -n1000 -c100 http://www.baidu.com/
<ul><li>-n 请求数</li> <li>-c 并发数</li> <li>http 压测目标地址</li> <li>-h 帮助</li></ul></li></ul> <p><strong>返回参数说明</strong></p> <ul><li>Requests per second（每秒接受请求数尽可能多）</li> <li>Time per request（每秒请求在耗时尽可能少）</li></ul> <h2 id="laravel5-8版本安装教程"><a href="#laravel5-8版本安装教程" class="header-anchor">#</a> Laravel5.8版本安装教程</h2> <p>1.安装</p> <p>方式1：全局安装</p> <p>通过composer安装 laravel 安装器</p> <p>composer global require &quot;laravel/installer&quot;</p> <p>确保将 composer vender bin 目录放置在你的系统环境变量 $PATH 中，以便系统可以找到 Laravel 的可执行文件。该目录根据您的操作系统存在不同的位置中；一些常见的配置包括：</p> <p>macOS: $HOME/.composer/vendor/bin</p> <p>GNU / Linux 发行版: $HOME/.config/composer/vendor/bin</p> <p>安装完后可通过 laravel new 项目名安装laravel</p> <p>方式二：命令行安装</p> <p>composer create-project --prefer -dist laravel/laravel 项目名
2.配置公共目录</p> <p>安装完laravel后必须将web服务器根目录指向public文件夹。如果是本地环境可忽略此操作。
3.配置读写权限</p> <p>storage和bootstrap/cache 两个文件夹需要写入权限。如果未配置laravel程序将无法运行。如果是本地环境可忽略此操作。
4.创建.env文件</p> <p>laravel安装完成，如果只有.env.example文件，需要创建.evn文件并将.env.example中的内容复制到.env中。
5.生成应用秘钥</p> <p>laravel安装完成后，需要在命令行下运行php artisan key:generate，该命令会生成一个32位的随机数，并写入.env文件中
6.修改config/app.php下的timezone</p> <p>app.php中的timezone默认是UTC,UTC是世界统一时间，需要将时区改成中国时区Asia/Shanghai
7.配置数据库</p> <p>创建数据库并将数据库配</p> <p>置信息写入.env文件</p> <div class="language- extra-class"><pre class="language-text"><code>DB_CONNECTION=mysql

DB_HOST=127.0.0.1

DB_PORT=3306

DB_DATABASE=homestead

DB_USERNAME=root

DB_PASSWORD=root

</code></pre></div><p>参考：https://www.jianshu.com/p/a3cdec31be9b</p> <h2 id="composer-安装与使用"><a href="#composer-安装与使用" class="header-anchor">#</a> Composer 安装与使用</h2> <p>Composer 是 PHP 的一个依赖管理工具。我们可以在项目中声明所依赖的外部工具库，Composer 会帮你安装这些依赖的库文件，有了它，我们就可以很轻松的使用一个命令将其他人的优秀代码引用到我们的项目中来。</p> <p>Composer 默认情况下不是全局安装，而是基于指定的项目的某个目录中（例如 vendor）进行安装。</p> <p>Composer 需要 PHP 5.3.2+ 以上版本，且需要开启 openssl。</p> <p>Composer 可运行在 Windows 、 Linux 以及 OSX 平台上。</p> <p>Composer 的安装
Wondows 平台</p> <p>Wondows 平台上，我们只需要下载 Composer-Setup.exe 后，一步步安装即可。</p> <p>需要注意的是你需要开启 openssl 配置，我们打开 php 目录下的 php.ini，将 extension=php_openssl.dll 前面的分号去掉就可以了。</p> <p>安装成功后，我们可以通过命令窗口(cmd) 输入 composer --version 命令来查看是否安装成功：</p> <p>接下来我们可以更改 Packagist 为国内镜像：</p> <p>composer config -g repo.packagist composer https://packagist.phpcomposer.com</p> <p>Linux 平台</p> <p>Linux 平台可以使用以下命令来安装：</p> <h1 id="php-r-copy-https-install-phpcomposer-com-installer-composer-setup-php"><a href="#php-r-copy-https-install-phpcomposer-com-installer-composer-setup-php" class="header-anchor">#</a> php -r &quot;copy('https://install.phpcomposer.com/installer', 'composer-setup.php');&quot;</h1> <h1 id="php-composer-setup-php"><a href="#php-composer-setup-php" class="header-anchor">#</a> php composer-setup.php</h1> <p>All settings correct for using Composer
Downloading...</p> <p>Composer (version 1.6.5) successfully installed to: /root/composer.phar
Use it: php composer.phar</p> <p>移动 composer.phar，这样 composer 就可以进行全局调用：</p> <h1 id="mv-composer-phar-usr-local-bin-composer"><a href="#mv-composer-phar-usr-local-bin-composer" class="header-anchor">#</a> mv composer.phar /usr/local/bin/composer</h1> <p>切换为国内镜像：</p> <h1 id="composer-config-g-repo-packagist-composer-https-packagist-phpcomposer-com"><a href="#composer-config-g-repo-packagist-composer-https-packagist-phpcomposer-com" class="header-anchor">#</a> composer config -g repo.packagist composer https://packagist.phpcomposer.com</h1> <p>更新 composer：</p> <h1 id="composer-selfupdate"><a href="#composer-selfupdate" class="header-anchor">#</a> composer selfupdate</h1> <p>Mac OS 系统</p> <p>Mac OS 系统可以使用以下命令来安装：</p> <p>$ curl -sS https://getcomposer.org/installer | php
$ sudo mv composer.phar /usr/local/bin/composer
$ composer --version
Composer version 1.7.2 2018-08-16 16:57:12</p> <p>切换为国内镜像：</p> <p>$ composer config -g repo.packagist composer https://packagist.phpcomposer.com</p> <p>更新 composer：</p> <p>$ composer selfupdate</p> <p>Composer 的使用</p> <p>要使用 Composer，我们需要先在项目的目录下创建一个 composer.json 文件，文件描述了项目的依赖关系。</p> <p>文件格式如下：</p> <p>{
&quot;require&quot;: {
&quot;monolog/monolog&quot;: &quot;1.2.*&quot;
}
}</p> <p>以上文件说明我们需要下载从 1.2 开始的任何版本的 monolog。</p> <p>接下来只要运行以下命令即可安装依赖包：</p> <p>composer install</p> <p>require 命令</p> <p>除了使用 install 命令外，我们也可以使用 require 命令快速的安装一个依赖而不需要手动在 composer.json 里添加依赖信息：</p> <p>$ composer require monolog/monolog</p> <p>Composer 会先找到合适的版本，然后更新composer.json文件，在 require 那添加 monolog/monolog 包的相关信息，再把相关的依赖下载下来进行安装，最后更新 composer.lock 文件并生成 php 的自动加载文件。
update 命令</p> <p>update 命令用于更新项目里所有的包，或者指定的某些包：</p> <h1 id="更新所有依赖"><a href="#更新所有依赖" class="header-anchor">#</a> 更新所有依赖</h1> <p>$ composer update</p> <h1 id="更新指定的包"><a href="#更新指定的包" class="header-anchor">#</a> 更新指定的包</h1> <p>$ composer update monolog/monolog</p> <h1 id="更新指定的多个包"><a href="#更新指定的多个包" class="header-anchor">#</a> 更新指定的多个包</h1> <p>$ composer update monolog/monolog symfony/dependency-injection</p> <h1 id="还可以通过通配符匹配包"><a href="#还可以通过通配符匹配包" class="header-anchor">#</a> 还可以通过通配符匹配包</h1> <p>$ composer update monolog/monolog symfony/*</p> <p>需要注意的时，包能升级的版本会受到版本约束的约束，包不会升级到超出约束的版本的范围。例如如果 composer.json 里包的版本约束为 ^1.10，而最新版本为 2.0。那么 update 命令是不能把包升级到 2.0 版本的，只能最高升级到 1.x 版本。关于版本约束请看后面的介绍。
remove 命令</p> <p>remove 命令用于移除一个包及其依赖（在依赖没有被其他包使用的情况下），如果依赖被其他包使用，则无法移除：</p> <p>$ composer remove monolog/monolog
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 0 installs, 0 updates, 2 removals</p> <ul><li>Removing psr/log (1.0.2)</li> <li>Removing monolog/monolog (1.23.0)
Generating autoload files</li></ul> <p>search 命令</p> <p>search 命令可以搜索包：</p> <p>$ composer search monolog</p> <p>该命令会输出包及其描述信息，如果只想输出包名可以使用 --only-name 参数：</p> <p>$ composer search --only-name monolog</p> <p>show 命令</p> <p>show 命令可以列出当前项目使用到包的信息：</p> <h1 id="列出所有已经安装的包"><a href="#列出所有已经安装的包" class="header-anchor">#</a> 列出所有已经安装的包</h1> <p>$ composer show</p> <h1 id="可以通过通配符进行筛选"><a href="#可以通过通配符进行筛选" class="header-anchor">#</a> 可以通过通配符进行筛选</h1> <p>$ composer show monolog/*</p> <h1 id="显示具体某个包的信息"><a href="#显示具体某个包的信息" class="header-anchor">#</a> 显示具体某个包的信息</h1> <p>$ composer show monolog/monolog</p> <p>基本约束
精确版本</p> <p>我们可以告诉 Composer 安装的具体版本，例如：1.0.2，指定 1.0.2 版本。
范围</p> <p>通过使用比较操作符来指定包的范围。这些操作符包括：&gt;，&gt;=，&lt;，&lt;=，!=。</p> <p>你可以定义多个范围，使用空格或者逗号 , 表示逻辑上的与，使用双竖线 || 表示逻辑上的或。其中与的优先级会大于或。 实例：</p> <div class="language- extra-class"><pre><code>&gt;=1.0
&gt;=1.0 &lt;2.0
&gt;=1.0 &lt;1.1 || &gt;=1.2
</code></pre></div><p>我们也可以通过使用连字符 - 来指定版本范围。</p> <p>连字符的左边表明了 &gt;= 的版本，如果右边的版本不是完整的版本号，则会被使用通配符进行补全。例如1.0 - 2.0等同于&gt;=1.0.0 &lt;2.1（2.0相当于2.0.*），而1.0.0 - 2.1.0则等同于&gt;=1.0.0 &lt;=2.1.0。
通配符</p> <p>可以使用通配符来设置版本。1.0.<em>相当于&gt;=1.0 &lt;1.1。
例子：1.0.</em>
波浪号 ~</p> <p>我们先通过后面这个例子去解释~操作符的用法：~1.2相当于&gt;=1.2 &lt;2.0.0，而~1.2.3相当于&gt;=1.2.3 &lt;1.3.0。对于使用Semantic Versioning作为版本号标准的项目来说，这种版本约束方式很实用。例如~1.2定义了最小的小版本号，然后你可以升级2.0以下的任何版本而不会出问题，因为按照Semantic Versioning的版本定义，小版本的升级不应该有兼容性的问题。简单来说，~定义了最小的版本，并且允许版本的最后一位版本号进行升级（没懂得话，请再看一边前面的例子）。
例子：~1.2</p> <div class="language- extra-class"><pre><code>需要注意的是，如果~作用在主版本号上，例如~1，按照上面的说法，Composer可以安装版本1以后的主版本，但是事实上是~1会被当作~1.0对待，只能增加小版本，不能增加主版本。
</code></pre></div><p>折音号 ^</p> <p>^操作符的行为跟Semantic Versioning有比较大的关联，它允许升级版本到安全的版本。例如，^1.2.3相当于&gt;=1.2.3 &lt;2.0.0，因为在2.0版本前的版本应该都没有兼容性的问题。而对于1.0之前的版本，这种约束方式也考虑到了安全问题，例如^0.3会被当作&gt;=0.3.0 &lt;0.4.0对待。
例子：^1.2.3
版本稳定性</p> <p>如果你没有显式的指定版本的稳定性，Composer会根据使用的操作符，默认在内部指定为-dev或者-stable。例如：
约束 	内部约束
1.2.3 	=1.2.3.0-stable</p> <blockquote><p>1.2 	&gt;1.2.0.0-stable
=1.2 	&gt;=1.2.0.0-dev
=1.2-stable 	&gt;=1.2.0.0-stable
&lt;1.3 	&lt;1.3.0.0-dev
&lt;=1.3 	&lt;=1.3.0.0-stable
1 - 2 	&gt;=1.0.0.0-dev ❤️.0.0.0-dev
~1.3 	&gt;=1.3.0.0-dev &lt;2.0.0.0-dev
1.4.* 	&gt;=1.4.0.0-dev &lt;1.5.0.0-dev
例子：1.0 - 2.0</p></blockquote> <p>如果你想指定版本只要稳定版本，你可以在版本后面添加后缀-stable。</p> <p>minimum-stability 配置项定义了包在选择版本时对稳定性的选择的默认行为。默认是stable。它的值如下（按照稳定性排序）：dev，alpha，beta，RC和stable。除了修改这个配置去修改这个默认行为，我们还可以通过稳定性标识（例如@stable和@dev）来安装一个相比于默认配置不同稳定性的版本。例如：</p> <p>{
&quot;require&quot;: {
&quot;monolog/monolog&quot;: &quot;1.0.*@beta&quot;,
&quot;acme/foo&quot;: &quot;@dev&quot;
}
}</p> <p>参考：https://www.runoob.com/w3cnote/composer-install-and-usage.html</p> <h2 id="php面试指南"><a href="#php面试指南" class="header-anchor">#</a> php面试指南</h2> <p>https://github.com/laravel-china/php-the-right-way</p> <p>https://github.com/Twipped/InterviewThis</p> <p>https://github.com/nineyang/clean-php-code</p> <p>https://github.com/xingshaocheng/architect-awesome</p> <p>https://github.com/CyC2018/CS-Notes</p> <p>https://github.com/wudi/PHP-Interview-Best-Practices-in-China</p> <p>https://github.com/colinlet/PHP-Interview-QA</p> <p>1.PHP 的底层性能特点。</p> <p>2.面向对象开发经验。</p> <p>3.至少掌握几个主流框架的架构原理，例如 Yii，CI，ThinkPHP 等。可以帮助拓展视野，站在巨人的肩膀上，可以省去很多走弯路的时间。</p> <p>4.服务器端了解 Python，erlang等其他编程语言能做的工作，并不是所有工作都需要交给 PHP 来实现的，学会多语言架构很重要。</p> <p>5.对于客户端，无论是 C 端还是 B 端的展现方式有了解。</p> <p>6.沟通能力，尤其要学会了解需求方的真正意图，制定出较优解决方案，这个多数是靠经验积累了。</p> <p>1、给你四个坐标点，判断它们能不能组成一个矩形，如判断([0,0],[0,1],[1,1],[1,0])能组成一个矩形。</p> <p>勾股定理，矩形是对角线相等的四边形。只要任意三点不在一条直线上，任选一点，求这一点到另外三点的长度的平方,两个短的之和如果等于最长的，那么这就是矩形。</p> <p>2、写一段代码判断单向链表中有没有形成环，如果形成环，请找出环的入口处，即P点</p> <div class="language- extra-class"><pre class="language-text"><code>/*
 *单链表的结点类
 */
class LNode{
    //为了简化访问单链表,结点中的数据项的访问权限都设为public
    public int data;
    public LNode next;
}
 
class LinkListUtli {
    //当单链表中没有环时返回null，有环时返回环的入口结点
    public static LNode searchEntranceNode(LNode L)
    {
        LNode slow=L;//p表示从头结点开始每次往后走一步的指针
        LNode fast=L;//q表示从头结点开始每次往后走两步的指针
        while(fast !=null &amp;&amp; fast.next !=null) 
        {
            if(slow==fast) break;//p与q相等，单链表有环
            slow=slow.next;
            fast=fast.next.next;
        }
        if(fast==null || fast.next==null) return null;
 
        // 重新遍历，寻找环的入口点
        slow=L;
        while(slow!=fast)
        {
            slow=slow.next;
            fast=fast.next;
        }
 
        return slow;
    }
}
</code></pre></div><p>3、写一个函数，获取一篇文章内容中的全部图片，并下载</p> <div class="language- extra-class"><pre class="language-text"><code>function download_images($article_url = '', $image_path = 'tmp'){
    // 获取文章类容
    $content = file_get_contents($article_url);
    // 利用正则表达式得到图片链接
    $reg_tag = '/&lt;img.*?\&quot;([^\&quot;]*(jpg|bmp|jpeg|gif|png)).*?&gt;/';
    $ret = preg_match_all($reg_tag, $content, $match_result); 
    $pic_url_array = array_unique($match_result1[1]);
    // 创建路径
    $dir = getcwd() . DIRECTORY_SEPARATOR .$image_path;
    mkdir(iconv(&quot;UTF-8&quot;, &quot;GBK&quot;, $dir), 0777, true);
    foreach($pic_url_array as $pic_url){
        // 获取文件信息
        $ch = curl_init($pic_url);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_NOBODY, 0);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE );
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $fileInfo = curl_exec($ch);
        $httpinfo = curl_getinfo($ch);
        curl_close($ch);
        // 获取图片文件后缀
        $ext = strrchr($pic_url, '.');
        $filename = $dir . '/' . uniqid() . $ext; 
        // 保存图片信息到文件
        $local_file = fopen($filename, 'w');
        if(false !== $local_file){
            if( false !== fwrite($local_file, $filecontent) ){
            fclose($local_file);
            }
        }
    }
}
</code></pre></div><p>4、获取当前客户端的IP地址，并判断是否在（111.111.111.111,222.222.222.222)</p> <div class="language- extra-class"><pre class="language-text"><code>如果没有使用代理服务器：

$ip = $_SERVER['REMOTE_ADDR'];

使用透明代理

$ip = $_SERVER['HTTP_X_FORWARDED_FOR'];

参考文章

https://www.cnblogs.com/rendd/p/6183094.html
</code></pre></div><p>5、nginx的log_format配置如下：</p> <p>log_format main ‘remoteaddr−remote_user [timelocal]&quot;request”’
‘statusbody_bytes_sent “httpreferer&quot;″&quot;http_user_agent” “upstreamresponsetime&quot;&quot;request_time” “http_x_forwarded_for&quot;';
从今天的nginx log文件 access.log中：</p> <p>a、列出“request_time”最大的20行？
b、列出早上10点访问量做多的20个url地址？</p> <p>6、什么是CSRF攻击？XSS攻击？如何防范？</p> <p>CSRF：跨站请求伪造，可以通过通过判断来源和加 Token 的方式来防范。</p> <p>XSS：跨站脚本攻击，可以通过对内容转义和过滤来防范,还有CSP</p> <p>7、应用中我们经常会遇到在user表随机调取10条数据来展示的情况，简述你如何实现该功能。</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT * FROM `table` WHERE id &gt;= (SELECT FLOOR( MAX(id) * RAND()) FROM `table` ) ORDER BY id LIMIT 1;
</code></pre></div><p>参考文章：</p> <p>https://www.cnblogs.com/riasky/p/3367558.html</p> <p>http://www.jb51.net/article/48801.htm</p> <p>8、从扑克牌中随机抽5张牌，判断是不是一个顺子，即这5张牌是连续的</p> <p>这个问题有个关键点，扑克牌，1-13 不能再多了。这就很简单了。用PHP来做，定义一个数组分别存着1到13,拿出一个，置空一个，最后看下 这五个置空的 是不是连续的。这种情况不考虑抽出的顺序。</p> <p>9、两条相交的单向链表，如何求它们的第一个公共节点</p> <p>思想：</p> <p>如果两个链表相交，则从相交点开始，后面的节点都相同，即最后一个节点肯定相同；
从头到尾遍历两个链表，并记录链表长度，当二者的尾节点不同，则二者肯定不相交；
尾节点相同，如果A长为LA，B为LB，如果LA&gt;LB,则A前LA-LB个先跳过
如果两个单向链表有公共的结点，也就是说两个链表从某一结点开始，它们的m_pNext都指向同一个结点。但由于是单向链表的结点，每个结点只有一个m_pNext，因此从第一个公共结点开始，之后它们所有结点都是重合的，不可能再出现分叉。所以，两个有公共结点而部分重合的链表，拓扑形状看起来像一个Y，而不可能像X。</p> <p>参考文献：</p> <p>https://blog.csdn.net/wcyoot/article/details/6426436</p> <p>https://blog.csdn.net/Lieacui/article/details/52046548</p> <p>10、最长公共子序列问题LCS，如有[1,2,5,11,32,15,77]和[99,32,15,5,1,77]两个数组，找到它们共同都拥有的数，写出时间复杂度最优的代码，不能用array_intersect（这里有坑，需要去研究一下动态规划）。</p> <p>11、linux的内存分配和多线程原理</p> <p>12、MYSQL中主键与唯一索引的区别</p> <p>主键：绝对不能有空值。唯一索引：可以有空值</p> <p>参考：https://www.cnblogs.com/lonelyxmas/p/4594624.html</p> <p>13、http与https的主要区别</p> <p>关键是S上。简而言之，https建立连接后要先把SSL的证书发下去，有了公钥和私钥，就可以解密了。</p> <p>参考：https://www.cnblogs.com/zyl-Tara/p/7079696.html</p> <p>14、http状态码及其含意</p> <p>200 请求已成功，请求所希望的响应头或数据体将随此响应返回。
301 被请求的资源已永久移动到新位置。
302 请求的资源现在临时从不同的 URI 响应请求。
400 1、语义有误，当前请求无法被服务器理解。2、请求参数有误。
401 当前请求需要用户验证。
403 服务器已经理解请求，但是拒绝执行它。
404 请求失败，请求所希望得到的资源未被在服务器上发现。
500 服务器遇到了一个未曾预料的状况，无法完成对请求的处理，会在程序码出错时出现。
501 服务器不支持当前请求所需要的某个功能。无法识别请求的方法。
502 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。
503 由于临时的服务器维护或者过载，服务器当前无法处理请求。
参考：http://tool.oschina.net/commons?type=5</p> <p>15、linux中怎么查看系统资源占用情况</p> <p>top、htop、free、uptime</p> <p>16、SQL注入的原理是什么？如何防止SQL注入</p> <p>原理：第一SQL本身有问题（这个不是主要问题）。第二你写的SQL很有问题（这是最主要的）</p> <p>防范：第一，绝对不要相信用户输入的任何东西。第二，预编译。现在的框架一般都会有SQL过滤的。</p> <p>17、isset(null) isset(false) empty(null) empty(false)输出</p> <p>PHP入门问题,isset和empty的区别</p> <p>分别是false, true, true, true</p> <p>18、优化MYSQL的方法</p> <p>第一，数据超过一定数量或者体积，请拆分表，垂直或者水平分（最有效果的优化）</p> <p>第二，务必有自增主键。通过自增主键来查数据是最快的。</p> <p>第三，常用的查询字段建立联合索引，写SQL一定要尊从最左原则，用到这个索引。</p> <p>第四，不要把逻辑运算放到sql里。言外之意是，不要写太复杂的SQL，你能写复杂的SQL 你肯定也能通过PHP实现。</p> <p>参考：https://cloud.tencent.com/developer/article/1004367</p> <p>19、数据库中的事务是什么？</p> <p>事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功，则认为事务成功，即使只有一个操作失败，事务也不成功。如果所有操作完成，</p> <p>事务则提交，其修改将作用于所有其他数据库进程。如果一个操作失败，则事务将回滚，该事务所有操作的影响都将取消。</p> <p>20、写一个函数，尽可能高效的从一个标准URL中取出文件的扩展名</p> <p>会 写正则最好。我反正不会正则，需要用的时候就百度。</p> <p>21、参数为多个日期时间的数组，返回离当前时间最近的那个时间</p> <p>遍历数组，求当前时间差，和第一个进行对比，小于第一个交换位置。最后取第一个即可。</p> <p>22、echo、print、print_r的区别</p> <p>这三个放在一起，回答的点在于，print_r是函数，echo、print是结构语言。</p> <p>至于他们具体的区别参考：https://www.cnblogs.com/xiaotaoing/p/6687368.html</p> <p>23、http协议的header中有哪些key及含义</p> <p>这个问题，很难。一会半会说不清楚。如果做过PHP restful 接口开发，也踩过这里面的坑，那应该是可以答出来常用的几个KEY的。</p> <p>参考：https://blog.csdn.net/u014175572/article/details/54861813</p> <p>24、二叉树前中后遍历代码</p> <p>1.层序遍历
2.先序遍历
3.中序遍历
4.后序遍历</p> <p>参考：https://blog.csdn.net/wk199351/article/details/65936001</p> <p>25、PHP的数组和C语言的数组结构上有何区别？</p> <p>但从PHP来讲，考的是PHP数组的实现。可以简单的认为，PHP的数组是hash桶+十字链表（实际上是数列Array，列表List，散列表/关联数组/字典Hashtable的聚合体）。优点是查询效率很高，遍历很方便，缺点是，占内存较多。（还是空间换时间的思路，毕竟现在内存又不值钱）</p> <p>C语言的数组，就是定长定类型的数列。</p> <p>26、Redis的跳跃表怎么实现的</p> <p>跳跃表(skiplist)是一种有序数据结构，它通过在每个节点中维持多个指向其他节点的指针，从而达到快速访问节点的目的。</p> <p>参考：https://blog.csdn.net/universe_ant/article/details/51134020</p> <p>27、哈希是什么？hash冲突后，数据怎么存？</p> <p>28、聚簇索引，聚集索引的区别？</p> <p>29、B+Tree是怎么进行搜索的</p> <p>30、数组和hash的区别是什么？</p> <p>31、写个函数，判断下面扩号是否闭合，左右对称即为闭合： ((()))，)(())，(())))，(((((())，(()())，()()</p> <p>32、 找出数组中不重复的值[1,2,3,3,2,1,5]</p> <p>用普通方法，肯定很容易的。</p> <p>33、32题你的时间复杂度是多少？有的情况下，你写了个算法，然后面试官会让你把你的算法的时间复杂度表达式写出来</p> <p>34、PHP的的这种弱类型变量是怎么实现的？</p> <p>考zval的，PHP的八种类型，本质只有一个结构。</p> <p>参考：https://blog.csdn.net/ohmygirl/article/details/41542445</p> <p>35、在HTTP通讯过程中，是客户端还是服务端主动断开连接？</p> <p>三次握手和四次挥手，以及他们每步的状态。</p> <p>这个问题最好能一步到位回答的全面的。一般都是有客户端告诉服务端，我这边东西发完了，可以断连接了么。但是如果客户端发完FIN服务端没有回复，就会重试，直到超过超时时间，就断了。服务端也一样，超过时间，服务端就断了。</p> <p>36、PHP中发起http请求有哪几种方式？它们有何区别？</p> <p>GET
POST
HEAD
PUT
DELETE
OPTIONS
TRACE
CONNECT</p> <p>37、有一颗二叉树，写代码找出来从根节点到flag节点的最短路径并打印出来，flag节点有多个。比如下图这个树中的6和14是flag节点，请写代码打印8、3、6 和 8、10、14两个路径</p> <p>典型的二叉搜索树。大学数据结构的基础题。</p> <p>参考：https://blog.csdn.net/BaiHuaXiu123/article/details/52488443</p> <p>38、有两个文件文件，大小都超过了1G，一行一条数据，每行数据不超过500字节，两文件中有一部分内容是完全相同的，请写代码找到相同的行，并写到新文件中。PHP最大允许内内为255M。</p> <p>将文件拆分成若干个小文件，根据内容计算hash值，分散到不同文件。</p> <p>39、请写出自少两个支持回调处理的PHP函数，并自己实现一个支持回调的PHP函数</p> <p>array_map,array_filter, array_walk</p> <p>40、请写出自少两个获取指定文件夹下所有文件的方法（代码或思路）。</p> <p>核心方法是scandir,核心思想是递归。</p> <p>41、请写出自少三种截取文件名后缀的方法或函数（PHP原生函数和自己实现函数均可）</p> <p>echo substr(strrchr($file, '.'), 1);</p> <p>echo substr(<mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="12.854ex" height="2.262ex" viewBox="0 -750 5681.7 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="66" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(550, 0)"><path data-c="69" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(895, 0)"><path data-c="6C" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(1193, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(1659, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2103.7, 0)"><path data-c="73" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(2572.7, 0)"><path data-c="74" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(2933.7, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3384.7, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3835.7, 0)"><path data-c="70" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(4338.7, 0)"><path data-c="6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(4823.7, 0)"><path data-c="73" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(5292.7, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>file, '.')+1);</p> <p>$arr=explode('.', $file);
echo <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="10.292ex" height="2.262ex" viewBox="0 -750 4549 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(529, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(980, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1431, 0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mi" transform="translate(1709, 0)"><path data-c="63" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(2142, 0)"><path data-c="6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(2627, 0)"><path data-c="75" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3199, 0)"><path data-c="6E" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3799, 0)"><path data-c="74" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(4160, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>arr)-1];</p> <p>$arr=explode('.', <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="14.542ex" height="2.262ex" viewBox="0 -750 6427.7 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="66" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(550, 0)"><path data-c="69" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(895, 0)"><path data-c="6C" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(1193, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(1659, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2048, 0)"><path data-c="3B" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path></g><g data-mml-node="mi" transform="translate(2492.7, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(2958.7, 0)"><path data-c="63" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(3391.7, 0)"><path data-c="68" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(3967.7, 0)"><path data-c="6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(4452.7, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(4918.7, 0)"><path data-c="6E" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(5518.7, 0)"><path data-c="64" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(6038.7, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>arr);</p> <p>echo strrev(explode('.', strrev($file))[0]);</p> <p>echo pathinfo($file)['extension'];</p> <p>echo pathinfo($file, PATHINFO_EXTENSION);
42、PHP如何实现不用自带的cookie函数为客户端下发cookie。对于分布式系统，如何来保存session值。</p> <p>这个题有点绕。考的还是COOKIE和SESSION的基础知识。服务端通过set-cookie命令来通知客户端保存cookie。</p> <p>只要按照domain path 过期时间等规则 用header函数就可以实现。</p> <p>分布式系统session，集中处理。按我们公司的架构，为了实现高可用和高容灾，提供一个分布式的验签服务。具体的可以看下redis的分布式服务架构。</p> <p>43、请用SHELL统计5分钟内，nginx日志里访问最多的URL地址，对应的IP是哪些？</p> <p>44、写一段shell脚本实现备份mysql指定库（如test)到指定文件夹并打包，并删除30天前的备份，然后将新的备份推送到远端服务器，完成后送邮件通知。</p> <p>45、mysql数据库中innodb和myisam引擎的区别</p> <p>区别主要在数据和索引的存储结构和存储方式上，以及对于事务的支持。</p> <p>参考：https://blog.csdn.net/chajinglong/article/details/56666771</p> <p>46、从用户在浏览器中输入网址并回车，到看到完整的见面，中间都经历了哪些过程。</p> <p>入门问题。这个问题有一个很大的坑，面试官可能会从这个问题下手问你一大堆问题。</p> <p>以PHP为例：通常最简单的回答，从用户的电脑找到最近的DNS服务，然后解析到对应的IP 然后双方开始HTTP连接，然后发送请求信息，服务器拿到请求信息就开始准备回应的信息，中间要经过nginx转发到frstCGI(PHP-FPM),然后PHP开始解析框架，解析请求头部，找到对应的API，该查数据库查数据，该组装HTML组装HTML，完事了就重新返回给用户。用户拿到返回数据，浏览器开始渲染页面，JS开始加载。</p> <p>47、如何分析一条sql语句的性能。</p> <p>explain，具体的请百度。（基本很少用性能分析语句。MYSQL的表设计上尽量冗余一部分字段，避免在MYSQL里处理大量的逻辑运算。我们是做PHP服务开发的，mysql语句能简单尽量简单。逻辑运算的地方可以在PHP里做。）</p> <p>48、ping一个服务器ping不通，用哪个命令跟踪路由包？</p> <p>linux:traceroute,windows:tracert
49、$a=[0,1,2,3]; $b=[1,2,3,4,5]; <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="5.346ex" height="1.505ex" viewBox="0 -583 2362.8 665" style="vertical-align:-0.186ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(529, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(1584.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g></g></g></svg></mjx-container>b; var_dump($a)等于多少？</p> <p>基础问题。本质还是考PHP数组的结构和特点。</p> <p>结果是01235。PHP用数字索引和STRING索引差别还是很大的</p> <p>参考：http://www.jb51.net/article/38593.htm</p> <p>50、<mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="20.66ex" height="2.262ex" viewBox="0 -750 9131.6 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(806.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1862.6, 0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mn" transform="translate(2140.6, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(2640.6, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(3085.2, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(3585.2, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(4029.9, 0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g><g data-mml-node="mo" transform="translate(4529.9, 0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g><g data-mml-node="mo" transform="translate(4807.9, 0)"><path data-c="3B" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path></g><g data-mml-node="mi" transform="translate(5252.6, 0)"><path data-c="66" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(5802.6, 0)"><path data-c="6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(6287.6, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(6738.6, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(7204.6, 0)"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(7733.6, 0)"><path data-c="63" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(8166.6, 0)"><path data-c="68" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(8742.6, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>a as &amp;<mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="10.753ex" height="2.262ex" viewBox="0 -750 4753 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(485, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="TeXAtom" transform="translate(874, 0)"></g><g data-mml-node="mi" transform="translate(874, 0)"><path data-c="66" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(1424, 0)"><path data-c="6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(1909, 0)"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(2360, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(2826, 0)"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3355, 0)"><path data-c="63" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(3788, 0)"><path data-c="68" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mo" transform="translate(4364, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>a as <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="11.536ex" height="2.262ex" viewBox="0 -750 5098.7 1000" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(485, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="TeXAtom" transform="translate(874, 0)"></g><g data-mml-node="mi" transform="translate(874, 0)"><path data-c="76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mi" transform="translate(1359, 0)"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="msub" transform="translate(1888, 0)"><g data-mml-node="mi"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(451, -150) scale(0.707)"><path data-c="64" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g><g data-mml-node="mi" transform="translate(2756.7, 0)"><path data-c="75" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3328.7, 0)"><path data-c="6D" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(4206.7, 0)"><path data-c="70" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mo" transform="translate(4709.7, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g></g></g></svg></mjx-container>a)等于多少;</p> <p>122
此处有一坑。foreach 完之后，$index , $value 并不会消失保留最后一次赋值。
这里的第一次foreach之后，数组中最后一个元素变成引用，引用变量 $v 继续存在且指向数组的最后一个元素。第二次遍历，因为遍历变量名是 $v , 所以等于说每次遍历都将此次遍历的值修改成最后元素的值，直至到遍历最后一个元素（引用元素），因为此时数组的最后一个元素已被修改成上一个元素的值，最后一次赋值就是 自己==自己。 故最后一个等于倒数第二个</p> <p>https://learnku.com/articles/7001/php-ray-foreach-and-references-thunder</p> <p>51、数据库中的存放了用户ID,扣费很多行，redis中存放的是用户的钱包，现在要写一个脚本，将数据库中的扣费记录同步到redis中，每5分钟执行一次。请问要考虑哪些问题？</p> <p>思路：生产者和消费者模式。这个问题也没有说其他的状态，比如数据库的数据会实时增加么？redis中每个钱包是否有其他服务在读取或者写入啊。什么的。数据库和REDIS放一起，要么考数据一致性，要么考出现锁，导致效率降低。</p> <p>52、MYSQL主从服务器，如果主服务器是innodb引擎,从服务器是myisam引擎，在实际应用中，会遇到什么问题？</p> <p>不知道，没用过，为什么这么设计？故意给自己找不愉快？</p> <p>53、linux中进程信号有哪些？</p> <p>kill -l 很少用</p> <p>54、redis的底层实现</p> <p>面试官这么样问你，你就反问他，你要的底层实现是字段的设计？内存分配管理？网络模型？数据同步？还是分布式的实现？（TIPS:面试就是两个人的博弈。面试官给出一个描述不清晰的问题，我们没必要回答。让他把问题讲清楚再思考怎么回复）</p> <p>参考：https://cloud.tencent.com/developer/article/1004377</p> <p>这篇文章 要多读几遍。</p> <p>55、异步模型</p> <p>问清楚是IO异步模型。还是AJAX这类的异步请求模型。差别非常大的。</p> <p>参考：https://cloud.tencent.com/developer/article/1005481</p> <p>狗东某风控研发必考题。</p> <p>56、10g文件，用php查看它的行数</p> <p>粗暴一点的方法 ini_set('memory_limit','-1'); 先把当前内存限制解除了 然后直接逐行统计。时间会非常的久。</p> <p>有更好的方法请留言。</p> <p>57、有10亿条订单数据，属于1000个司机的，请取出订单量前20的司机</p> <p>（TIPS）不要中招。不要用常用思路来处理，10亿数据 你再怎么优化，全表求和，都是要死人的。</p> <p>我们从设计上解决这个问题。只有一千个司机。我们可以做个简单哈希，分库分表，%求余数。保证这一千个司机分在一千个表里，每个人有每个人的单独表。引擎用MYSAIM，求表中数据的总数，效率飞快，遍历一千张表，求最大前二十即可。</p> <p>58、设计一个微信红包的功能</p> <p>没做过。其实题目表达不清楚。如果做过微信公众号开发，知道微信事件模型的XML数据结构，应该会好做一点。</p> <p>59、根据access.log文件统计最近5秒的qps，并以如下格式显示，01 1000（难点在01序号）</p> <p>tail -f access.log | awk -F '[' '{print $2}' | awk '{print $1}' | uniq -c
参考：https://blog.csdn.net/dong_007_007/article/details/78330337</p> <p>60、php7性能为什么提升这么高</p> <p>不逼逼，直接参考：http://www.laruence.com/php-internal</p> <p>鸟哥的文章要多读，多读。</p> <p>61、遍历一个多维数组</p> <p>递归。array_map传入一个回调函数。</p> <p>62、有这样一个字符串abcdefgkbcdefab......随机长度，写一个函数来求bcde在这个字符串中出现的次数</p> <p>substr_count（）；</p> <p>63、有一个1G大小的一个文件，里面每一行是一个词，词的大小不超过16个字节，内存限制大小是1M。返回频数最高的100个词</p> <p>方法太多了，但是实现起来 各有各的问题。</p> <p>我可能只会用HASH映射做。其他的，不会。</p> <p>参考：第64题。</p> <p>64、十道海量数据处理面试题与十个方法大总结</p> <blockquote><p>https://blog.csdn.net/v_JULY_v/article/details/6279498
65、php进程模型，php怎么支持多个并发</p></blockquote> <p>守护进程模型（需要知道php-fpm的各种配置了）</p> <p>参考：https://www.jianshu.com/p/542935a3bfa8</p> <p>66、nginx的进程模型，怎么支持多个并发</p> <p>这个三言两语说不清楚。</p> <p>参考：https://www.zhihu.com/question/22062795</p> <p>67、php-fpm各配置含义，fpm的daemonize模式</p> <p>php-fpm 的配置并不多，常用的就更少了。</p> <p>参考：http://www.4wei.cn/archives/1002061</p> <p>static - 子进程的数量是固定的（pm.max_children）
ondemand - 进程在有需求时才产生（当请求时，与 dynamic 相反，pm.start_servers 在服务启动时即启动
dynamic - 子进程的数量在下面配置的基础上动态设置：pm.max_children，pm.start_servers，pm.min_spare_servers，pm.max_spare_servers
68、让你实现一个简单的架构，并保持高可用，两个接口，一个上传一条文本，一个获取上传的内容，你怎么来设计？要避免单机房故障，同时要让代码层面无感。</p> <p>参考：分布式架构设计必备CAP原理。</p> <p>69、两台mysql服务器，其中一台挂了，怎么让业务端无感切换，并保证正常情况下讲台服务器的数据是一致的</p> <p>不是核心业务的话，先停写，把备机拉起来，查看两台机器的日志，进行数据补偿，开写。</p> <p>如果是核心业务的话，现在所有的写操作都在正常的状态机器上。把好的这台机器的备机拉起来，当主机。</p> <p>以上全是应急操作。实际上数据库的容灾设计要复杂的多。</p> <p>面试官要是问你，备机的数据不一致怎么办，你要勇敢怼回去，你们每秒多少写入操作。按照百万级表，每秒1000的写入效率，正常的设计是，分布在2台机器上每台500。这个级别的数据同步，出现差异的概率 可以忽略不计的。有一台出现问题，另一台也可以抗住。</p> <p>（正常的操作，还是先停写，等数据一致，切换，开写。我们公司搞这些切换都是在凌晨4.00左右，核心业务的每秒写操作，只有十几个。前后耽搁不到20秒）。</p> <p>70、http协议具体的定义</p> <p>这种题 有是很难回答的。太宽泛了，我们面试早就不问这种问题了。</p> <p>参考：日本人写的《图解HTTP》</p> <p>71、什么是锁，怎么解决锁的问题</p> <p>计算机原理学的，生产者消费者模型，银行家模型，都可以解决锁的问题。</p> <p>72、rand与mt_rand的区别</p> <p>我实习的时候遇到这个坑。</p> <p>说是mt_rand比rand快4倍。</p> <p>在随机数区间不大的情况下并没有很大的效率差距。但是出现重复数的几率，rand要比mt_rand高很多。</p> <p>73、mysql事务隔离是怎么实现的</p> <p>通过各种行锁表锁，各种乐观锁悲观锁，排他锁实现的呀。</p> <p>74、mysql的锁怎么实现的</p> <p>https://blog.csdn.net/alexdamiao/article/details/52049993</p> <p>https://www.cnblogs.com/luyucheng/p/6297752.html</p> <p>https://blog.csdn.net/tangkund3218/article/details/47704527</p> <p>75、对称加密和非对称加密的方式</p> <p>对称加密：我们俩共用一个秘钥，你加密，我解密。</p> <p>非对称加密：我给你一个公钥，你加密完了，我还能有我的私钥把密文解开。但是你没有我的私钥。</p> <p>扩展：椭圆加密算法。</p> <p>76、10瓶水，其中一瓶有毒，小白鼠喝完有毒的水之后,会在24小时后死亡,问:最少用几只小白鼠可以在24小时后找到具体是哪一瓶水有毒。</p> <p>四只</p> <p>二进制问题。薛定谔的老鼠。</p> <p>一只老鼠有两个状态，死活，对应01。假设老鼠的个数为A，则有2^A&gt;=10; A=4；</p> <p>思路很简单，十瓶药编号：0,1,10,11....1001;</p> <p>0不喝。第一只老鼠喝所有个位是1的：13579，第二只喝十位是1的，第三只和百位是1的，第四只喝千位是1的。</p> <p>24小时后，看下死了的是1，活着的是0。按老鼠的顺序乖乖站好……假如第一只和第三只死了，那就是0101，就是5 有问题。</p> <p>77、redis是如何进行同步的，同步的方式，同步回滚怎么办，数据异常怎么办，同时会问MYSQL的同步方式和相关异常情况</p> <p>redis 集群主从同步的简单原理</p> <p>Redis的复制功能是基于内存快照的持久化策略基础上的，也就是说无论你的持久化策略选择的是什么，只要用到了Redis的复制功能，就一定会有内存快照发生。</p> <p>当Slave启动并连接到Master之后，它将主动发送一个SYNC命令( 首先Master会启动一个后台进程，将数据快照保存到文件中[rdb文件] Master 会给Slave 发送一个</p> <p>Ping命令来判断Slave的存活状态 当存活时 Master会将数据文件发送给Slave 并将所有写命令发送到Slave )。</p> <p>Slave首先会将数据文件保存到本地 之后再将 数据 加载到内存中。</p> <p>当第一次链接 或者是 故障后 重新连接 都会先判断Slave的存活状态 在做全部数据的同步 ， 之后只会同步Master的写操作(将命令发送给Slave)</p> <p>问题：</p> <p>当 Master 同步数据时 若数据量较大 而Master本身只会启用一个后台进程 来对多个Slave进行同步 ， 这样Master就会压力过大 ， 而且Slave 恢复的时间也会很慢！</p> <p>redis 主从复制的优点：</p> <p>(1)在一个Redis集群中，master负责写请求，slave负责读请求，这么做一方面通过将读请求分散到其他机器从而大大减少了master服务器的压力，另一方面slave专注于提供
读服务从而提高了响应和读取速度。</p> <p>(2)在一个Redis集群中，如果master宕机，slave可以介入并取代master的位置，因此对于整个Redis服务来说不至于提供不了服务，这样使得整个Redis服务足够安全。</p> <p>(3)水平增加Slave机器可以提高性能</p> <p>参考：</p> <p>https://blog.csdn.net/hxpjava1/article/details/78347890/
https://www.cnblogs.com/zhao-blog/p/6131524.html
78、怎么解决跨域</p> <p>JSONP
添加响应头，允许跨域
代理的方式
79、json和xml区别,各有什么优缺点</p> <p>（1）可读性方面：基本相同，XML的可读性比较好；</p> <p>（2）可扩展性方面：都具有良好的扩展性；</p> <p>（3）编码难度方面：相对而言，JSON的编码比较容易；</p> <p>（4）解码难度：JSON的解码难度基本为零，XML需要考虑子节点和父节点；</p> <p>（5）数据体积方面：JSON相对于XML来讲，数据体积小，传递的速度比较快；</p> <p>（6）数据交互方面：JSON与javascript的交互更加方便，更容易解析处理，更好的数据交互；</p> <p>（7）数据描述方面：XML对数据描述性比较好；</p> <p>（8）传输速度方面：JSON的速度远远快于XML。</p> <p>参考：https://blog.csdn.net/java19880223/article/details/20054111</p> <p>80、Trait优先级</p> <p>在trait继承中，优先顺序依次是：来自当前类的成员覆盖了 trait 的方法，而 trait 则覆盖了被继承的方法</p> <p>81、a引用b，报错c里面类重复定义，循环引用会出现什么问题</p> <p>82、下面员工3的薪水大于其主管的薪水，一条SQL找到薪水比下属低的主管</p> <p>id	username	salary	pid
1	a	3000	null
2	b	8000	null
3	c	5000	1
4	d	6000	3
SELECT a.<em>, b.</em>
FROM <code>user</code> as a
LEFT JOIN <code>user</code> as b ON a.pid = b.id AND a.salary &gt; b.salary
WHERE b.id &gt; 0;
82、在一个坐标系内有一个N个点组成的多边形,现在有一个坐标点,写代码或思路来判断这个点是否处于多边形内</p> <p>83、数据库如果出现了死锁,你怎么排查,怎么判断出现了死锁?</p> <p>https://www.cnblogs.com/huanyou/p/5775965.html</p> <p>84、写一个一个程序来查找最长子串</p> <p>http://www.jb51.net/article/128449.htm</p> <p>85、分析一个问题:php-fpm的日志正常,但客户端却超时了,你认为可能是哪里出了问题,怎么排查?</p> <p>检查nginx log，请求是否达到nginx 和是否正常转发给 php-fpm</p> <p>86、nginx的工作流程是什么样的,可以画图描述</p> <p>87、进程间通信方式有哪些</p> <p>1)管道
管道分为有名管道和无名管道
无名管道是一种半双工的通信方式,数据只能单向流动,而且只能在具有亲缘关系的进程间使用.进程的亲缘关系一般指的是父子关系。无明管道一般用于两个不同进程之间的通信。当一个进程创建了一个管道,并调用fork创建自己的一个子进程后,父进程关闭读管道端,子进程关闭写管道端,这样提供了两个进程之间数据流动的一种方式。
有名管道也是一种半双工的通信方式,但是它允许无亲缘关系进程间的通信。</p> <p>2)信号量
信号量是一个计数器,可以用来控制多个线程对共享资源的访问.,它不是用于交换大批数据,而用于多线程之间的同步.它常作为一种锁机制,防止某进程在访问资源时其它进程也访问该资源.因此,主要作为进程间以及同一个进程内不同线程之间的同步手段.</p> <p>3)信号
信号是一种比较复杂的通信方式,用于通知接收进程某个事件已经发生.</p> <p>4)消息队列
消息队列是消息的链表,存放在内核中并由消息队列标识符标识.消息队列克服了信号传递信息少,管道只能承载无格式字节流以及缓冲区大小受限等特点.消息队列是UNIX下不同进程之间可实现共享资源的一种机制,UNIX允许不同进程将格式化的数据流以消息队列形式发送给任意进程.对消息队列具有操作权限的进程都可以使用msget完成对消息队列的操作控制.通过使用消息类型,进程可以按任何顺序读信息,或为消息安排优先级顺序.</p> <p>5)共享内存
共享内存就是映射一段能被其他进程所访问的内存,这段共享内存由一个进程创建,但多个进程都可以访问.共享内存是最快的IPC(进程间通信)方式,它是针对其它进程间通信方式运行效率低而专门设计的.它往往与其他通信机制,如信号量,配合使用,来实现进程间的同步与通信.</p> <p>6)套接字：可用于不同及其间的进程通信</p> <p>88、主从复制，从服务器会读取到主服务器正在回滚的数据吗？主数据库写成功，从服务器因为一些原因写失败，最后会出现什么情况？主从复制如果键冲突怎么办？</p> <p>不会；主从数据不一致；正常是不会出现这种情景，具体看情况，是否可以修复，恢复到之前的时间点，然后追回同步。</p> <p>89、事务有几种隔离级别？事务的隔离级别是怎么实现的?</p> <p>读未提交（read-uncommitted）
不可重复读（read-committed）
可重复读（repeatable-read）
串行化（serializable）
https://www.cnblogs.com/huanongying/p/7021555.html</p> <p>90、什么是B+树,请画b+树的结构</p> <p>https://blog.csdn.net/qq_23217629/article/details/52510485</p> <p>91、mysql中的字符集，客户端与数据库不一致，怎么办? MYSQL中字符串到显示到界面,字符转换的过程是怎样的？数据库中的字符集是latin1,你现在将utf8的字符串存到latin1字符集的数据库表,你能将utf8的字符串存进去吗？假如你说能存,追问:能否恢复?假如能,那怎么恢复?</p> <p>92、写一段代码，找到所有子集合，如[a,b,c]的子集合有{},{a},{b},{c},{ab},{ac},{abc}</p> <p>93、['a'=&gt;200,'b'=&gt;100,'c'=&gt;100],写一个自定义排序函数，按值降序,如果值一样，按键排序</p> <p>冒泡排序</p> <p>94、设计一个缓存系统，可以定期或空间占满之后自动删除长期不用的数据，不能使用用遍历。</p> <p>我当时的答案是用链表来存,缓存命中就将该缓存移到链表头,然后链表尾就都是冷数据了。
我记得之前是在哪里看过这个设计,但我忘记在连接了,请知道朋友的把连接贴上来。</p> <p>95、==和===的区别，写出以下输出：&quot;aa&quot;==1,&quot;bb&quot;==0，1==&quot;1&quot;</p> <p>== 等于，不需要对比数据类型
=== 全等，需要对比类型
false, true, true</p> <p>96、一个排序好的数组,将它从中间任意一个位置切分成两个数组,然后交换它们的位置并合并，合并后新数组元素如:20,21,22,25,30,1,2,3,5,6,7,8,15,18,19,写一个查询函数来查找某个值是否存在。</p> <p>97、设计一个树形结构，再写一个函数对它进行层序遍历</p> <p>98、'<mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="6.985ex" height="2.283ex" viewBox="0 -759 3087.2 1009" style="vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="76" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mi" transform="translate(485, 0)"><path data-c="61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="msup" transform="translate(1014, 0)"><g data-mml-node="mi"><path data-c="72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(451, 363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path></g></g><g data-mml-node="mo" transform="translate(1987.2, 0)"><text data-variant="normal" transform="matrix(1 0 0 -1 0 0)" font-size="884px" font-family="serif">和</text><path data-c="22" d="M34 634Q34 659 50 676T93 694Q121 694 144 668T168 579Q168 525 146 476T101 403T73 379Q69 379 60 388T50 401Q50 404 62 417T88 448T116 500T131 572Q131 584 130 584T125 581T112 576T94 573Q69 573 52 590T34 634ZM238 634Q238 659 254 676T297 694Q325 694 348 668T372 579Q372 525 350 476T305 403T277 379Q273 379 264 388T254 401Q254 404 266 417T292 448T320 500T335 572Q335 584 334 584T329 581T316 576T298 573Q273 573 256 590T238 634Z" transform="translate(600, 0)"></path></g></g></g></svg></mjx-container>var&quot;的区别</p> <p>双引号串中的内容可以被解释而且替换，而单引号串中的内容总被认为是普通字符。</p> <p>在单引号串中甚至反斜杠也失去了他的扩展含义（除了插入反斜杠\和插入单引号'）。所以，当你想在字串中进行变量代换和包 含\n（换行符）等转义序列时，你应该使用双引号。单引号串可以用在其他任何地方，脚本中使用单引号串处理速度会更快些。</p> <p>99、self和static的区别</p> <p>static：如果在子类中重写了父类中的static方法、属性，父类就会去访问了子类的static方法</p> <p>self: 是类内指针，不管子类有没有重写过父类中的方法、属性都指向本类的静态方法、属性</p> <p>100、PHP的协程以及用途</p> <p>http://www.laruence.com/2015/05/28/3038.html</p> <p>https://blog.csdn.net/gavin_new/article/details/54603490</p> <p>101、描述autoload的机制</p> <p>https://blog.csdn.net/zhihua_w/article/details/52723402</p> <p>102、mysql中字段类型各占几个字节：smallint、int、bigint、datetime、varchar(8)</p> <p>smallint 2字节
int 4字节
bigint 8字节
datetime 8字节
varchar(8) 8*3字节
http://www.jb51.net/article/55853.htm</p> <p>103、哪些属性唯一确定一条TCP连接</p> <p>104、myisam和innodb的区别，为什么myisam比innodb快，myisam和innodb的索引数据结构是什么样的?innodb主键索引和非主键索引的区别?其索引上存放的数据是什么样的？</p> <p>区别主要在数据和索引的存储结构和存储方式上，以及对于事务的支持。</p> <p>参考：https://blog.csdn.net/chajinglong/article/details/56666771</p> <p>105、断开TCP连接时，timewait状态会出现在发起分手的一端还是被分手的一端</p> <p>为什么建立TCP连接需要三次握手？
原因：为了应对网络中存在的延迟的重复数组的问题
例子：
假设client发起连接的连接请求报文段在网络中没有丢失，而是在某个网络节点长时间滞留了，导致延迟到达server。本来这是一个已经失效的连接报文，但是server接收到这个连接报文之后，误认为client发起了新的连接，于是向client发送确认报文段。此时因为没有了连接的3次握手，client不会对server的确认报文作出回应，也不会向server发送数据，server就以为连接已经建立，一直在空等client的数据，这样server的这一部分网络资源就被浪费了。</p> <p>为什么断开TCP连接需要进行四次握手 ？
因为TCP连接是全双工的网络协议，允许同时通信的双方同时进行数据的收发，同样也允许收发两个方向的连接被独立关闭，以避免client数据发送完毕，向server发送FIN关闭连接，而server还有发送到client的数据没有发送完毕的情况。所以关闭TCP连接需要进行四次握手，每次关闭一个方向上的连接需要FIN和ACK两次握手。</p> <p>TIME_WAIT状态的意义</p> <p>在TCP连接中，当被动关闭连接的一方(图中client)发送的FIN报文到达时，被动关闭连接的一方会发送ACK确认报文，并且进入TIME_WAIT状态，并且等待2MSL时间段(MSL:maximum segment life)。这么做有下述两个原因：</p> <p>被动关闭连接的一方(图中的server)在一段时间内没有收到对方的ACK确认数据包，会重新发送FIN数据包，因而主动关闭连接的一方需要停留在等待状态以处理对方重新发送的FIN数据包。否则他会回应一个RST数据包给被动关闭连接的一方，使得对方莫名其妙。</p> <p>在TIME_WAIT状态下，不允许应用程序在当前ip和端口上和之前通信的client(这个client的ip和端口号不变)建立一个新的连接。这样就能避免新的连接收到之前的ip和端口一致的连接残存在网络中的数据包。这也是TIME_WAIT状态的等待时间被设置为2MSL的原因，以确保网络上当前连接两个方向上尚未接收的TCP报文已经全部消失。</p> <p>https://www.cnblogs.com/zhoudayang/p/6012257.html</p> <p>106、AWK各种数据分析考得非常多，要多练习，题目不再一一写了</p> <p>107、redis中集合、有序集合、hyperLog、hash的数据结构是啥样的</p> <p>key value</p> <p>108、描述一下:一个请求到达nginx的全部处理过程（nginx自身会调用哪些逻辑）、然后怎么与php通信，中间的流程是什么样的等等？</p> <p>https://www.jianshu.com/p/df89b530db89</p> <p>https://blog.csdn.net/xiajun07061225/article/details/9309273</p> <p>109、nginx和php-fpm的相关配置,随便问里面各种参数啥意思</p> <p>php-fpm可以通过tcp socket和unix socket两种方式实现。</p> <p>https://blog.csdn.net/koastal/article/details/52303316</p> <p>110、假如有一张地图,如下图,&quot;-&quot;代表海洋、&quot;+&quot;代表陆地,用你最擅长的方式,取出陆地的坐标。</p> <p>--++----++--+++---
-++++----+++++++--
-+++----++++------
-----++------++++-
---++++++-----+++-
-----+++------+++-
比如上图在数组中表示成,1表示成陆地,0表示海洋:</p> <p>[
[0,0,1,1,0,0,0,1,1....],
[0,1,1,1.....],
]
写个算法取出所有陆地的坐标,并按块放到一起,如地图上左上角第一个陆地的坐标是:</p> <p>[
[0,2],[0,3],
[1,1],[1,2],[1,3],[1,4],
[2,1],[2,2],[2,3]
]
111、Jsonp的实现原理，你还知道哪些跨域方式？</p> <p>JSONP
添加响应头，允许跨域
代理的方式
112、如果某个博客通过判断 referer 方式来进行图片防盗链，如何破解？</p> <p>curl 设置来源地址来欺骗对方服务器验证</p> <p>113、简述 mysql 查询优化的本质，并举2个例子</p> <p>114、设计一个秒杀系统，如何保证商品不超卖？</p> <p>https://blog.csdn.net/zhoudaxia/article/details/38067003</p> <p>115、单例模式的优点是什么？抽象类是什么？ 还了解哪些设计模式？</p> <p>单例模式又称为职责模式，它用来在程序中创建一个单一功能的访问点，通俗地说就是实例化出来的对象是唯一的。
所有的单例模式至少拥有以下三种公共元素：</p> <p>它们必须拥有一个构造函数，并且必须被标记为private
它们拥有一个保存类的实例的静态成员变量
它们拥有一个访问这个实例的公共的静态方法
单例类不能再其它类中直接实例化，只能被其自身实例化。它不会创建实例副本，而是会向单例类内部存储的实例返回一个引用。
抽象的类不能被实例化。任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的。被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。</p> <p>https://www.cnblogs.com/kangxl/p/6347179.html</p> <p>工厂模式
适配器模式</p> <p>116、斗地主中，地主比农民得到王炸的概率多多少？</p> <h1 id="php面试相关"><a href="#php面试相关" class="header-anchor">#</a> php面试相关</h1> <h2 id="tip"><a href="#tip" class="header-anchor">#</a> tip</h2> <p>这个文档只是一个提纲，以及一些可能的考点或者demo代码。列出了大概的技术栈，每一个点都需要花更多的时间去深入钻研，万不能只看一点点皮毛就去面试。而应该在广泛学习的基础上，通过文档里的每一个点引出无数个思维方向，从而在大脑里形成一个自己的知识树，明白自己的欠缺，不断学习，丰富自己的技术栈。</p> <h2 id="redis"><a href="#redis" class="header-anchor">#</a> redis</h2> <p>Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p> <p>redis包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hashs（哈希类型）。这些数据类型都 支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。</p> <h4 id="php中reids的操作"><a href="#php中reids的操作" class="header-anchor">#</a> php中reids的操作</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// from 菜鸟runoob</span>
<span class="token comment">// 从代码中以点带面，在什么样的场景中会运用到</span>

<span class="token comment">// 配置连接的IP、端口、以及相应的数据库</span>
<span class="token variable">$server</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
‘host’     <span class="token operator">=</span><span class="token operator">&gt;</span> ’<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>′<span class="token punctuation">,</span>
‘port’     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">6379</span><span class="token punctuation">,</span>
‘database’ <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">15</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 普通set/get操作</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set</span><span class="token punctuation">(</span>‘library’<span class="token punctuation">,</span> ‘predis’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$retval</span> <span class="token operator">=</span> <span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span>‘library’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$retval</span><span class="token punctuation">;</span> <span class="token comment">//显示 ‘predis’</span>

<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span>‘foo’<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

<span class="token comment">// del 删除</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">del</span><span class="token punctuation">(</span>‘foo’<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

<span class="token comment">// hset/hget 存取hash表的数据</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hset</span><span class="token punctuation">(</span>‘hash1′<span class="token punctuation">,</span>’key1′<span class="token punctuation">,</span>’v1′<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将key为’key1′ value为’v1′的元素存入hash1表</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hset</span><span class="token punctuation">(</span>‘hash1′<span class="token punctuation">,</span>’key2′<span class="token punctuation">,</span>’v2′<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hget</span><span class="token punctuation">(</span>‘hash1′<span class="token punctuation">,</span>’key1′<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//取出表’hash1′中的key ‘key1′的值,返回’v1′</span>

<span class="token comment">// 同步保存服务器数据到磁盘</span>
<span class="token variable">$redis</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mysql"><a href="#mysql" class="header-anchor">#</a> mysql</h2> <h4 id="mysql优化怎么做的？"><a href="#mysql优化怎么做的？" class="header-anchor">#</a> mysql优化怎么做的？</h4> <ol><li><p>设计角度：存储引擎的选择，字段类型选择，范式</p></li> <li><p>功能角度：可以利用mysql自身的特性，如索引，查询缓存，碎片整理，分区、分表等</p></li> <li><p>sql语句的优化方面:尽量简化查询语句，能查询字段少就尽量少查询字段，优化分页语句、分组语句等。</p></li> <li><p>部署大负载架构体系：数据库服务器单独出来，负载大时可以采用主从复制，读写分离机制进行设计</p></li> <li><p>从硬件上升级数据库服务器。</p></li></ol> <h4 id="sql注入是什么及如何预防sql注入？"><a href="#sql注入是什么及如何预防sql注入？" class="header-anchor">#</a> sql注入是什么及如何预防sql注入？</h4> <p>SQL注入攻击指的是用户或者黑客通过构建特殊的输入作为参数传入我们的Web应用程序端，而这些输入大都是SQL语法里的一些组合，通过执行SQL语句进而执行攻击者所要的操作，其主要原因是程序员没有细致地过滤用户输入的数据，致使非法数据侵入系统而造成的。因此我们在做开发过程中一定要预防sql注入，主要从两方面着手：</p> <p>1、占位符的方式，就是对sql语句进行预处理，然后执行sql语句</p> <p>2、通过addslashes或者mysql_real_escape_string这两个函数对用户输入的值进行转义处理，把一些特殊的字符转义掉。</p> <h4 id="预处理"><a href="#预处理" class="header-anchor">#</a> 预处理</h4> <p>预处理语句用于执行多个相同的 SQL 语句，并且执行效率更高。</p> <p><strong>预处理语句的工作原理如下</strong>：</p> <ol><li><p>预处理：创建 SQL 语句模板并发送到数据库。预留的值使用参数 &quot;?&quot; 标记 。例如：
<code>INSERT INTO MyGuests (firstname, lastname, email) VALUES(?, ?, ?)</code>
数据库解析，编译，对SQL语句模板执行查询优化，并存储结果不输出。</p></li> <li><p>执行：最后，将应用绑定的值传递给参数（&quot;?&quot; 标记），数据库执行语句。应用可以多次执行语句，如果参数的值不一样。</p></li></ol> <p>相比于直接执行SQL语句，预处理语句有两个主要优点：</p> <ol><li><p>预处理语句大大减少了分析时间，只做了一次查询（虽然语句多次执行）。</p></li> <li><p>绑定参数减少了服务器带宽，你只需要发送查询的参数，而不是整个语句。</p></li></ol> <p>预处理语句针对<strong>SQL注入</strong>是非常有用的，因为参数值发送后使用不同的协议，保证了数据的合法性。</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$stmt</span> <span class="token operator">=</span> <span class="token variable">$conn</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;INSERT INTO MyGuests (firstname, lastname, email) VALUES (?, ?, ?)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bind_param</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;sss&quot;</span><span class="token punctuation">,</span> <span class="token variable">$firstname</span><span class="token punctuation">,</span> <span class="token variable">$lastname</span><span class="token punctuation">,</span> <span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置参数并执行</span>
<span class="token variable">$firstname</span> <span class="token operator">=</span> <span class="token double-quoted-string string">&quot;John&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$lastname</span> <span class="token operator">=</span> <span class="token double-quoted-string string">&quot;Doe&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$email</span> <span class="token operator">=</span> <span class="token double-quoted-string string">&quot;john@example.com&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$stmt</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="mysql索引"><a href="#mysql索引" class="header-anchor">#</a> mysql索引</h4> <ul><li><strong>非常重要！</strong></li></ul> <p>了解InnoDB和Myisam，B+tree,聚簇索引等等
<a href="https://www.cnblogs.com/shijingxiang/articles/4743324.html" target="_blank" rel="noopener noreferrer">InnoDB索引原理详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MongoDB</h2> <p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</p> <table><thead><tr><th>SQL术语/概念</th> <th>MongoDB术语/概念</th> <th>解释/说明</th></tr></thead> <tbody><tr><td>database</td> <td>database</td> <td>数据库</td></tr> <tr><td>table</td> <td>collection</td> <td>数据库表/集合</td></tr> <tr><td>row</td> <td>document</td> <td>数据记录行/文档</td></tr> <tr><td>column</td> <td>field</td> <td>数据字段/域</td></tr> <tr><td>index</td> <td>index</td> <td>索引</td></tr> <tr><td>table joins</td> <td></td> <td>表连接,MongoDB不支持</td></tr> <tr><td>primary key</td> <td>primary key</td> <td>主键,MongoDB自动将_id字段设置为主键</td></tr></tbody></table> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// from runoob</span>
<span class="token variable">$m</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MongoClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 连接默认主机和端口为：mongodb://localhost:27017</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token variable">$m</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">test</span><span class="token punctuation">;</span> <span class="token comment">// 获取名称为 &quot;test&quot; 的数据库</span>

<span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;runoob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建集合</span>

<span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">runoob</span><span class="token punctuation">;</span> <span class="token comment">// 选择集合</span>
<span class="token variable">$document</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span> 
    <span class="token double-quoted-string string">&quot;title&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;MongoDB&quot;</span><span class="token punctuation">,</span> 
    <span class="token double-quoted-string string">&quot;description&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;database&quot;</span><span class="token punctuation">,</span> 
    <span class="token double-quoted-string string">&quot;likes&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token double-quoted-string string">&quot;url&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;http://www.runoob.com/mongodb/&quot;</span><span class="token punctuation">,</span>
    <span class="token double-quoted-string string">&quot;by&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;菜鸟教程&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入文档</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$document</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查找文档</span>
<span class="token variable">$cursor</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 更新文档</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;title&quot;</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token double-quoted-string string">&quot;MongoDB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'$set'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;title&quot;</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token double-quoted-string string">&quot;MongoDB 教程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删除文档</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;title&quot;</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token double-quoted-string string">&quot;MongoDB 教程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;justOne&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><h2 id="composer"><a href="#composer" class="header-anchor">#</a> composer</h2> <p>Composer 是 PHP5.3以上 的一个依赖管理工具。它允许你声明项目所依赖的代码库，它会在你的项目中为你安装他们。</p> <h4 id="创建一个-composer-json-文件"><a href="#创建一个-composer-json-文件" class="header-anchor">#</a> 创建一个 composer.json 文件</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;monolog/monolog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.*&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="php-web相关"><a href="#php-web相关" class="header-anchor">#</a> php web相关</h2> <h4 id="cookie与session的区别"><a href="#cookie与session的区别" class="header-anchor">#</a> cookie与session的区别</h4> <ol><li><p>cookie数据存放在客户的浏览器上，session数据放在服务器上。</p></li> <li><p>cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗，考虑到安全应当使用session。</p></li> <li><p>session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用COOKIE。</p></li> <li><p>单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。</p></li></ol> <h4 id="get和post的区别"><a href="#get和post的区别" class="header-anchor">#</a> get和post的区别</h4> <ol><li>get是从服务器上获取数据，post是向服务器传送数据。</li> <li>get是把参数数据队列加到提交表单的ACTION属性所指的URL中，值和表单内各个字段一一对应，在URL中可以看到。post是通过HTTP post机制，将表单内各个字段与其内容放置在HTML HEADER内一起传送到ACTION属性所指的URL地址。用户看不到这个过程。</li> <li>get传送的数据量较小，不能大于2KB。post传送的数据量较大，一般被默认为不受限制。4.. get安全性非常低，post安全性较高。但是执行效率却比Post方法好。</li></ol> <h4 id="php在储存session以什么形式存在"><a href="#php在储存session以什么形式存在" class="header-anchor">#</a> php在储存session以什么形式存在</h4> <p>PHP为session的存储提供了三种方式: 文件/ 内存/ 自定义存储,默认是使用文件存储.在访问量大的网站上采用这种方式就不大合 适,因为这样会导致大量的输入输出的冗余.我们可以在php.ini更改配置文件或者php脚本中通过相应的函数来设置session文件的存储类型来改变session文件的存储形式</p> <h4 id="xss攻击怎么防止"><a href="#xss攻击怎么防止" class="header-anchor">#</a> xss攻击怎么防止</h4> <p>XSS又称CSS，全称Cross SiteScript(跨站脚本攻击)， XSS攻击类似于SQL注入攻击，是Web程序中常见的漏洞，XSS属于被动式且用于客户端的攻击方式，所以容易被忽略其危害性。其原理是攻击者向有XSS漏洞的网站中输入(传入)恶意的HTML代码，当用户浏览该网站时，这段HTML代码会自动执行，从而达到攻击的目的。如，盗取用户Cookie信息、破坏页面结</p> <p>常见的恶意字符XSS输入：</p> <ol><li><p>XSS 输入通常包含 JavaScript 脚本，如弹出恶意警告框：
<code>&lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;</code></p></li> <li><p>XSS 输入也可能是 HTML 代码段，譬如：</p> <p>(1) 网页不停地刷新 <code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;&quot;&gt;</code></p> <p>(2) 嵌入其它网站的链接，重定向到其它网站等。</p></li></ol> <p>方法：利用php htmlentities()函数</p> <p>php防止XSS跨站脚本攻击的方法：是针对非法的HTML代码包括单双引号等，使用htmlspecialchars()函数。</p> <h4 id="静态化如何实现的"><a href="#静态化如何实现的" class="header-anchor">#</a> <a href="https://blog.csdn.net/qq_39618306/article/details/79014438" target="_blank" rel="noopener noreferrer">静态化如何实现的<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>这里要说的静态化指的是页面静态化，也即生成实实在在的静态文件，也即不需要查询数据库就可以直接从文件中获取数据，指的是真静态。它的实现方式主要有两种：</p> <ul><li><p>一种是我们在添加信息入库的时候就生成的静态文件，也称为模板替换技术，这种主要用在后台，用于一些基本上很少变化的信息上，在添加信息的时候使用添加的信息来替换制定好的模板中的内容，达到生成静态文件的目的，这样在前台访问该信息时，可以直接从生成好的静态文件中获取信息，如一些CMS系统。</p></li> <li><p>另外一种是用户在访问我们的页面时先判断是否有对应的缓存文件存在，如果存在就读缓存，不存在就读数据库，同时生成缓存文件。这种实现的主要原理是基于PHP中的ob缓冲技术来实现的，当没有静态文件时，从数据库中读取，读取的数据使用OB缓存，使用相关的函数从OB缓冲中读取数据，写入到文件中，形成静态文件。当然这个过程中要考虑静态文件的缓存周期问题，我们可以根据文件的最后修改时间和当前时间及设定的缓存时间来定时更新缓存文件。</p></li></ul> <h4 id="如何处理负载、高并发"><a href="#如何处理负载、高并发" class="header-anchor">#</a> 如何处理负载、高并发</h4> <p>从低成本、高性能和高扩张性的角度来说有如下处理方案：</p> <ol><li><p>HTML静态化
其实大家都知道，效率最高、消耗最小的就是纯静态化的html页面，所以我们尽可能使我们的 网站上的页面采用静态页面来实现，这个最简单的方法其实也是最有效的方法。</p></li> <li><p>图片服务器分离
把图片单独存储，尽量减少图片等大流量的开销，可以放在一些相关的平台上，如骑牛等</p></li> <li><p>数据库集群和库表散列及缓存
数据库的并发连接为100，一台数据库远远不够，可以从读写分离、主从复制，数据库集群方面来着手。另外尽量减少数据库的访问，可以使用缓存数据库如memcache、redis。</p></li> <li><p>镜像：
尽量减少下载，可以把不同的请求分发到多个镜像端。</p></li> <li><p>负载均衡：
Apache的最大并发连接为1500，只能增加服务器，可以从硬件上着手，如F5服务器。当然硬件的成本比较高，我们往往从软件方面着手。
<strong>负载均衡</strong>建立在现有网络结构之上，它提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力，同时能够提高网络的灵活性和可用性。目前使用最为广泛的负载均衡软件是Nginx、LVS、HAProxy。</p></li></ol> <ul><li>知识点： <a href="https://www.cnblogs.com/Anker/p/6056540.html" target="_blank" rel="noopener noreferrer">反向代理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="服务器"><a href="#服务器" class="header-anchor">#</a> 服务器</h2> <p>心中有概念，然后足够的实际操作。</p> <h4 id="apache"><a href="#apache" class="header-anchor">#</a> Apache</h4> <p><a href="https://baike.baidu.com/item/apache/6265" target="_blank" rel="noopener noreferrer">百度百科介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="nginx"><a href="#nginx" class="header-anchor">#</a> Nginx</h4> <p><a href="https://baike.baidu.com/item/nginx/3817705" target="_blank" rel="noopener noreferrer">百度百科介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="php特性"><a href="#php特性" class="header-anchor">#</a> php特性</h2> <h4 id="php-的垃圾收集机制是怎样的"><a href="#php-的垃圾收集机制是怎样的" class="header-anchor">#</a> PHP 的垃圾收集机制是怎样的</h4> <p>php作为脚本语言是页面结束即释放变量所占内存的。 当一个 PHP线程结束时，当前占用的所有内存空间都会被销毁，当前程序中所有对象同时被销毁。GC进程一般都跟着每起一个SESSION而开始运行的.gc目的是为了在session文件过期以后自动销毁删除这些文件.在PHP中，没有任何变量指向这个对象时，这个对象就成为垃圾。PHP会将其在内存中销毁；这是PHP的GC垃圾处理机制，防止内存溢出。 执行这些函数也可以起到回收作用__destruct /unset/mysql_close /fclose php对session有明确的gc处理时间设定session.gc_maxlifetime 如果说有垃圾，那就是整体的程序在框架使用中，会多次调用同一文件等等造成的非单件模式等。所以在出来的时候，必要的用_once引用，在声明类的时候使用单件模式。还有简化逻辑等等。</p> <h4 id="zval"><a href="#zval" class="header-anchor">#</a> zval</h4> <p><a href="https://www.jianshu.com/p/63a381a7f70c" target="_blank" rel="noopener noreferrer">内存管理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://php.net/manual/zh/features.gc.php" target="_blank" rel="noopener noreferrer">垃圾回收机制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="cgi、fastcgi、php-fpm"><a href="#cgi、fastcgi、php-fpm" class="header-anchor">#</a> cgi、fastcgi、php-fpm</h4> <ul><li><p><strong>cgi</strong>
早期的web server只可以处理简单的静态web文件，但是随着技术的发展出现动态语言如PHP，Python。PHP语言交给PHP解析器进行处理，但是处理之后如何和web server进行通信呢？
为了解决不同的语言处理器与web server之间的通讯，出现了CGI协议。只要按照CGI协议编写程序，就可以实现与语言解析器与web server之间的通讯。
CGI协议虽然解决了语言解析器和seb server之间通讯的问题，但是它的效率很低。因为web server每收到一个请求都会创建一个CGI进程，PHP解析器都会解析php.ini文件，初始化环境，请求结束的时候再关闭进程。对于每一个创建的CGI进程都会执行这些操作。所以效率很低。</p></li> <li><p><strong>FastCGI</strong>
FastCGI是用来提高CGI性能的，FastCGI每次处理完请求之后不会关闭掉进程。而是保留这个进程，使这个进程可以处理多个请求。这样的话每个请求都不用再重新创建一个进程了。大大提升了处理效率。</p></li> <li><p><strong>PHP-FPM</strong>
PHP-FPM(FastCGI Process Manager：FastCGI进程管理器)是一个实现了Fastcgi的程序，并且提供进程管理的功能。进程包括master进程和worker进程。master进程只有一个，负责监听端口，接受来自web server的请求。worker进程一般会有多个，每个进程中会嵌入一个PHP解析器，进程PHP代码的处理。</p></li></ul> <h4 id="php-ini中的safe-mode-影响"><a href="#php-ini中的safe-mode-影响" class="header-anchor">#</a> php.ini中的safe_mode 影响</h4> <p><strong>Warning
本特性已自 PHP 5.3.0 起废弃并将自 PHP 5.4.0 起移除。</strong></p> <p>1)用户输入输出函数（fopen()file()require(),只能用于调用这些函数有相同脚本的拥有者）</p> <p>2)创建新文件（限制用户只在该用户拥有目录下创建文件）</p> <p>3)用户调用popen()systen()exec()等脚本，只有脚本处在safe_mode_exec_dir配置指令指定的目录中才可能</p> <p>4)加强HTTP认证，认证脚本拥有者的UID的划入认证领域范围内，此外启用安全模式下，不会设置PHP_AUTH</p> <p>5)mysql服务器所用的用户名必须与调用mysql_connect()的文件的拥有者用户名相同6)</p> <p>受影响的函数变量以及配置命令达到40个</p> <h4 id="php的设计模式"><a href="#php的设计模式" class="header-anchor">#</a> php的设计模式</h4> <ol><li><p><strong>单例模式</strong>
一个类在整个应用中，只有一个对象实例的设计模式
类必须自行创建这个实例
必须自行向整个系统提供这个实例
<strong>三私</strong>：私有静态成员变量、构造函数、克隆函数
<strong>一公</strong>：公共的静态方法</p></li> <li><p><strong>工厂模式</strong>
可以根据输入的参数或者应用程序配置的不同,创建一种专门用来实例化并返回其它类的实例的类</p></li> <li><p>观察者模式
观察者模式提供了组件之间紧密耦合的另一种方法。
该模式：一个对象通过添加一个方法（该方法允许另一个对象，即观察者注册自己）全本身变得可观察。当可观察的对象更改时，它会将消息发送到已注册的观察者。这些观察者使用该信息执行的操作与可观察的对象无关。</p></li> <li><p>命令链模式：
以松散耦合主题为基础，发送消息、命令和请求，或通过一组处理程序发送任意内容。每个处理程序都会自行判断自己能否处理请求，如果可以，该请求被处理，进程停止。</p></li> <li><p>策略模式：
此算法是从复杂类提取的，因而可以方便地替换。</p></li></ol> <h2 id="php语法"><a href="#php语法" class="header-anchor">#</a> php语法</h2> <h4 id="include和require的区别"><a href="#include和require的区别" class="header-anchor">#</a> Include和require的区别</h4> <p>require函数通常放在PHP程序的最前面，在PHP程序执行之前，就会先读取require指定引入的文件，使它变成PHP程序网页的一部分。</p> <p>include函数一般是放在流程控制的处理部分中。PHP程序在读到include的文件时，才将它读进来，这种方式可以把程序执行时的流程简单化。</p> <p>他们两个的用途是一样的，不一定非要哪个放在最前面哪个放在中间，他们最根本的区别在于错误处理的方式不一样。</p> <p>require一个文件存在错误的话，那么程序就会中断执行，并显示致命错误</p> <p>而include一个文件存在错误的话，那么程序不会中断，会继续执行，并显示一个警告的错误</p> <p>其它区别：include有返回值，而require没有。</p> <h4 id="php的变量类型"><a href="#php的变量类型" class="header-anchor">#</a> PHP的变量类型</h4> <p><strong>四种标量类型</strong></p> <ol><li><p>boolean （布尔型）：这是最简单的类型，只有两种取值，可以为 TRUE/true 或 FALSE/false ，不区分大小写。详细请查看：PHP布尔类型（boolean）</p></li> <li><p>integer （整型）：在32 位操作系统中它的有效范围是：-2 147 483 648~+2 147 483 647。整型值可以使用十进制，十六进制或八进制表示，前面可以加上可选的符号（- 或者 +）。八进制表示数字前必须加上 0（零），十六进制表示数字前必须加上 0x。</p></li> <li><p>float （浮点型, 也称作 double)</p></li> <li><p>string （字符串）：字符型变量不同于其他编程语言有字符与字符串之分，在PHP 中，统一使用字符型变量来定义字符或者字符串。</p></li></ol> <p><strong>两种复合类型</strong></p> <ol><li><p>array （数组）：数组型变量是一种比较特殊的变量类型，将在后续章节中详细说明。</p></li> <li><p>object （对象）：对象也是一种特殊的数据类型。要创建object变量，请使用 new 关键字。详细请查看：PHP对象类型（object）</p></li></ol> <p><strong>两种特殊类型</strong>：</p> <ol><li><p>resource（资源）：源是一种特殊变量，保存了到外部资源的一个引用。资源是通过专门的函数来建立和使用的。详情请查看：PHP资源类型（resource）</p></li> <li><p>NULL（NULL）：表示一个变量没有值。NULL 类型唯一可能的值就是 NULL。</p></li></ol> <h4 id="单引号与双引号的区别"><a href="#单引号与双引号的区别" class="header-anchor">#</a> 单引号与双引号的区别</h4> <ol><li><p>单引号内部的变量不会执行， 双引号会执行</p></li> <li><p>单引号解析速度比双引号快。</p></li> <li><p>单引号只能解析部分特殊字符，双引号可以解析所有特殊字符。</p></li></ol> <h2 id="php扩展"><a href="#php扩展" class="header-anchor">#</a> php扩展</h2> <h4 id="gd库"><a href="#gd库" class="header-anchor">#</a> GD库</h4> <p>图像处理扩展
<a href="http://php.net/manual/zh/ref.image.php" target="_blank" rel="noopener noreferrer">GD 和图像处理 函数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="yaf"><a href="#yaf" class="header-anchor">#</a> yaf</h4> <p><a href="http://php.net/manual/zh/book.yaf.php" target="_blank" rel="noopener noreferrer">Yet Another Framework<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="curl"><a href="#curl" class="header-anchor">#</a> curl</h4> <p><a href="http://php.net/manual/zh/book.curl.php" target="_blank" rel="noopener noreferrer">Client URL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="mysqli"><a href="#mysqli" class="header-anchor">#</a> mysqli</h4> <p><a href="http://php.net/manual/zh/book.mysqli.php" target="_blank" rel="noopener noreferrer">mysql增强版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="php7"><a href="#php7" class="header-anchor">#</a> php7</h2> <p><a href="http://www.runoob.com/w3cnote/php7-new-features.html" target="_blank" rel="noopener noreferrer">php7新特性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>??运算符(NULL 合并运算符)</li></ul> <p>由于日常使用中存在大量同时使用三元表达式和 isset()的情况，NULL 合并运算符使得变量存在且值不为NULL， 它就会返回自身的值，否则返回它的第二个操作数。</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 如果 $_GET['user'] 不存在返回 'nobody'，否则返回 $_GET['user'] 的值</span>
<span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token single-quoted-string string">'nobody'</span><span class="token punctuation">;</span>
<span class="token comment">// 类似的三元运算符</span>
<span class="token variable">$username</span> <span class="token operator">=</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">'nobody'</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><ul><li>&lt;=&gt; 太空船操作符（组合比较符）</li></ul> <p>太空船操作符用于比较两个表达式。当a大于、等于或小于b时它分别返回-1、0或1。</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 整型</span>
<span class="token keyword">echo</span> <span class="token number">1</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">echo</span> <span class="token number">1</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>
<span class="token keyword">echo</span> <span class="token number">2</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

<span class="token comment">// 浮点型</span>
<span class="token keyword">echo</span> <span class="token number">1.5</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">1.5</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">echo</span> <span class="token number">1.5</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">2.5</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>
<span class="token keyword">echo</span> <span class="token number">2.5</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token number">1.5</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
 
<span class="token comment">// 字符串</span>
<span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;a&quot;</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;a&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;a&quot;</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;b&quot;</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>
<span class="token keyword">echo</span> <span class="token double-quoted-string string">&quot;b&quot;</span> <span class="token operator">&lt;=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;a&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><ul><li>通过 define() 定义常量数组</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'ANIMALS'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'dog'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'cat'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'bird'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token constant">ANIMALS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;cat&quot;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><ul><li>整除</li></ul> <p>新增了整除函数 intdiv()</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">intdiv</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出结果： int(3)</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><h2 id="php优化"><a href="#php优化" class="header-anchor">#</a> php优化</h2> <p><a href="https://www.awaimai.com/1050.html" target="_blank" rel="noopener noreferrer">48条高效率的PHP优化写法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="操作系统相关"><a href="#操作系统相关" class="header-anchor">#</a> 操作系统相关</h2> <p>操作系统是本科计算机中可以说是非常重要的课程，一定要认真复习。</p> <h4 id="linux常用命令及工具"><a href="#linux常用命令及工具" class="header-anchor">#</a> linux常用命令及工具</h4> <p><code>ps aux</code> 查看进程pid等常用
<code>grep</code> 过滤，-E支持表达式
<code>curl</code> 发起一次请求
<code>kill -9 pid</code> 杀死进程
<code>top</code> linux版任务管理器，查看当前进程占用内存CPU
<code>wc -l</code> 计算行数
<code>tail -f file</code> 实时查看文件变化
<code>contab</code> 定时任务工具
……</p> <h4 id="进程各个状态"><a href="#进程各个状态" class="header-anchor">#</a> 进程各个状态</h4> <p><a href="https://blog.csdn.net/qwe6112071/article/details/70473905" target="_blank" rel="noopener noreferrer">进程的状态和转换详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="网络相关"><a href="#网络相关" class="header-anchor">#</a> 网络相关</h2> <p><a href="https://baike.baidu.com/item/TCP/IP%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener noreferrer">TCP/IP - 百度百科<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.cnblogs.com/ranyonsue/p/5984001.html" target="_blank" rel="noopener noreferrer">HTTP协议详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="http状态码"><a href="#http状态码" class="header-anchor">#</a> http状态码</h4> <p><strong>12345法则</strong></p> <ul><li>1** 消息
100  客户端应当继续发送请求。</li> <li>2** 成功
200 成功</li> <li>3** 重定向
301 永久重定向，例如http定向到https
302 临时重定向，例如js跳转</li> <li>4** 请求错误
403 forbidden 拒绝请求。
404 not found 找不到请求的网页。</li> <li>5** 服务器错误
500 Internal Server Error 服务器内部错误，例如php代码错误</li></ul> <h4 id="http版本"><a href="#http版本" class="header-anchor">#</a> http版本</h4> <h5 id="_1-0"><a href="#_1-0" class="header-anchor">#</a> 1.0</h5> <ul><li><p>无状态、无连接。
HTTP1.0规定浏览器和服务器保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接，服务器处理完成后立即断开TCP连接（无连接），服务器不跟踪每个客户端也不记录过去的请求（无状态）。</p></li> <li><p>队头阻塞
HTTP1.0规定下一个请求必须在前一个请求响应到达之前才能发送。假设前一个请求响应一直不到达，那么下一个请求就不发送，同样的后面的请求也给阻塞了。</p></li></ul> <h5 id="_1-1"><a href="#_1-1" class="header-anchor">#</a> 1.1</h5> <ul><li><p>长连接
HTTP1.1增加了一个Connection字段，通过设置Keep-Alive可以保持HTTP连接不断开，避免了每次客户端与服务器请求都要重复建立释放建立TCP连接，提高了网络的利用率。如果客户端想关闭HTTP连接，可以在请求头中携带Connection: false来告知服务器关闭请求。</p></li> <li><p>管道化
基于HTTP1.1的长连接，使得请求管线化成为可能。管线化使得请求能够“并行”传输。</p></li> <li><p>新的字段
如cache-control，支持断点传输，以及增加了Host字段（使得一个服务器能够用来创建多个Web站点）。</p></li></ul> <h5 id="_2-0"><a href="#_2-0" class="header-anchor">#</a> 2.0</h5> <ul><li><p>二进制分帧
HTTP2.0通过在应用层和传输层之间增加一个二进制分帧层，突破了HTTP1.1的性能限制、改进传输性能。</p></li> <li><p>多路复用（连接共享）
HTTP2.0实现了真正的并行传输，它能够在一个TCP上进行任意数量HTTP请求。而这个强大的功能则是基于“二进制分帧”的特性。</p></li> <li><p>头部压缩
HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。高效的压缩算法可以很大的压缩header，减少发送包的数量从而降低延迟。</p></li> <li><p>服务器推送
服务器除了对最初请求的响应外，服务器还可以额外的向客户端推送资源，而无需客户端明确的请求。</p></li></ul> <h4 id="http和https的区别"><a href="#http和https的区别" class="header-anchor">#</a> http和https的区别</h4> <table><thead><tr><th></th> <th>http</th> <th>https</th></tr></thead> <tbody><tr><td>端口</td> <td>80</td> <td>443</td></tr> <tr><td>内容</td> <td>明文传输</td> <td>加密传输</td></tr> <tr><td>安全</td> <td>无状态</td> <td>需要安全证书</td></tr></tbody></table> <p>HTTPS 约等于 HTTP+SSL</p> <ul><li>优点
相对安全/SEO排名更高</li> <li>缺点
证书需要申请，服务器资源占用更高，连接建立需要传送证书，速度更慢.</li></ul> <h4 id="tcp-ip"><a href="#tcp-ip" class="header-anchor">#</a> TCP/IP</h4> <p><a href="https://blog.csdn.net/guoguo527/article/details/52078962" target="_blank" rel="noopener noreferrer">四层模型及OSI七层参考模型<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.cnblogs.com/Jessy/p/3535612.html" target="_blank" rel="noopener noreferrer">三次握手四次挥手<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>简略快速回忆版：</p> <ul><li><p>三次握手
客户端：我要和你通信(syn-sent)
服务端：你的请求已收到，发送确认(syn-rcvd)
客户端：你的确认已收到，连接建立(est)</p></li> <li><p>四次挥手
客户端：我没有东西了，准备关闭(fin-wait)
服务端：你的关闭我收到了，但我还有点东西没传完(close-wait)
……一段时间后……
服务端：我的东西传完了，可以关闭了(last-ack)
客户端：收到关闭通知，你也可以关闭了(time-wait)</p></li></ul> <h2 id="算法相关"><a href="#算法相关" class="header-anchor">#</a> 算法相关</h2> <p>各种数据结构，栈图树；各种算法，动态规划balabala</p> <p>中等难度算法题在解答基础上提高速度，高级算法题能够有思路，不求ac，至少通过一部分。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.f33c03af.js" defer></script><script src="/assets/js/2.8a1ae630.js" defer></script><script src="/assets/js/37.3ef6ca82.js" defer></script>
  </body>
</html>
